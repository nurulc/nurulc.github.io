<!DOCTYPE html>
<html><head>
<link rel="stylesheet" href="./stylesheets/tryit.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/default.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/theme/cobalt.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" />
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/edit/matchbrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/comment/continuecomment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/comment/comment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/keymap/sublime.min.js"></script>
<script src="./javascript/prettyprint.js"></script>
<script src="./javascript/tryit.js"></script>
<title>Data Frame Examples</title>
<meta name="viewport" content="width=device-width, initial-scale=0.7">
<!-- Load plotly.js into the DOM -->
  <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
<script src="https://unpkg.com/str-data-frame@^0.2/dist/bundle.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Dosis:wght@400;600;800&display=swap" rel="stylesheet">
<!-- font-family: font-family: 'Dosis', sans-serif; -->
<link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,400;0,600;0,700;0,900;1,400;1,600;1,700&display=swap" rel="stylesheet">
<!-- font-family: 'Titillium Web', sans-serif; -->

<script>

function D(d) {
	if(d === undefined ) return "<undef>";
	//if(isClass(d)) return d.prototype.constructor.toString();
	if(typeof d === 'function') return "<func body>"; 
	if(d instanceof Date) return d.toString;
	if(typeof d === 'object') return JSON.stringify(d)
	return d.toString();
}

function getType(d) {
	if(d === undefined) return 'undefined'
	if(Array.isArray(d)) return 'Array';
	return typeof d;

}

function textArea(s) {
  return `<textarea>${asHTML(this.s.substr(0,2000))}</textarea>`;
}

function Text(s) {
  if(s === undefined || s.length < 100) return JSON.stringify(s);
  return ({
   s,
   "_toHtml" : textArea 
  });
}

function isClass(d) { return false;
  // try {
  // 	if( typeof d !== "function" ) return false; 
  // 	var x = new d;

  // 	let name = x.constructor ? x.constructor.name : '';
  // 	return (name !== '' && name !==  'Array' && name !== 'Function');
  //  } catch(e) {
  //  	  return false;
  //  }
}

function isEmpty(arrOrObj) {
  if(arrOrObj === '' || arrOrObj === undefined || arrOrObj === null) return true;
  if(Array.isArray(arrOrObj) && arrOrObj.length === 0) return true;
  if(typeof arrOrObj === 'object' && 
      Object.keys(arrOrObj).length === 0 ) return true;
  return false;
}

  // const isCtorClass = obj.constructor
  //     && obj.constructor.toString().substring(0, 5) === 'class'
  // if(obj.prototype === undefined) {
  //   return isCtorClass
  // }
  // const isPrototypeCtorClass = obj.prototype.constructor 
  //   && obj.prototype.constructor.toString
  //   && obj.prototype.constructor.toString().substring(0, 5) === 'class'
  // return isCtorClass || isPrototypeCtorClass

</script>
</head>
<body>
<div class="ui sidebar inverted vertical menu">
<div class="item"> <a href="https://github.com/nurulc/tryitjs" target="_blank"><img src="https://unpkg.com/tryitjs@0.4.6/tryit-small.png"></a></div> 
<div class="item">
<div class="ui right dropdown item">
    Options
    <i class="dropdown icon"></i>
    <div class="menu">
      <div class="item save_all">Save All Changes</div>
      <div class="item revert_changes">Revert changes</div>
      <div class="item clear_storage">Delete All Changes</div>
    </div> 
  </div>
</div>
<div class="item toc_title">Contents</div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('dataframe')">Data Frame</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('summary')">Summary</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('introduction')">Introduction</a></div>
<div class="toc2"> 2.1&nbsp;&nbsp;<a onclick="jumpTag('overview')">Overview</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('gettingstarted')">Getting started</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('dataframepackage')">DataFrame package</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('quickstart')">Quick Start</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('getdataworldcovidreport')">Get Data - World Covid Report</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('usefetchtogetrawdata')">Use fetch to get raw data</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('createaframefromthedata')">Create a frame from the data</a></div>
<div class="toc1"> 3&nbsp;&nbsp;<a onclick="jumpTag('letsplotsomedata')">Lets plot some data</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('organizethecoviddata')">Organize the covid data</a></div>
<div class="toc2"> 0.1&nbsp;&nbsp;<a onclick="jumpTag('selectcriticalcolumns')">Select Critical Columns</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('rollupdataintocontinents')">Roll up data into continents</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('covidsituationineverycontinent')">Covid situation in every continent</a></div>
<div class="toc2"> 2.1&nbsp;&nbsp;<a onclick="jumpTag('letsgetapiechaart')">Let's get a pie-chaart</a></div>
<div class="toc1"> 3&nbsp;&nbsp;<a onclick="jumpTag('countriesandcontinent')">Countries and continent</a></div>
<div class="toc1"> 4&nbsp;&nbsp;<a onclick="jumpTag('plotusacoviddata')">Plot USA Covid data</a></div>
<div class="toc1"> 5&nbsp;&nbsp;<a onclick="jumpTag('plotcountrycoviddata')">Plot Country Covid data</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('morecovidframe')">More Covid Frame</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('showthesizeoftheframeandthecolumnnames')">Show the size of the frame and the column names</a></div>
<div class="toc2"> 1.1&nbsp;&nbsp;<a onclick="jumpTag('showthedatasummaryasaframe')">Show the data summary as a Frame</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('getridofunnecessarycolumns')">Get rid of unnecessary columns</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('removingdataredundency')">Removing data redundency</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('getdataforbrazil')">Get data for Brazil</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('splitcovidframe')">Split COVID frame</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('countryframe')">Country frame</a></div>
<div class="toc2"> 1.1&nbsp;&nbsp;<a onclick="jumpTag('summaryofcasesbycountry')">Summary of cases by country</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('letstrytoimprovethedisplayofnumbers')">Lets try to improve the display of numbers</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('summarizetheinformationbycontinent')">Summarize the information by continent</a></div>
<div class="toc2"> 0.1&nbsp;&nbsp;<a onclick="jumpTag('transpose')">Transpose</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('sample1001ofthedataandshowthefirst20')">Sample 1% (0.01) of the data and show the first 20</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('createsomeutilityfunctiontoroundanumericstring')">Create some utility function to round a numeric string</a></div>
<div class="toc1"> 3&nbsp;&nbsp;<a onclick="jumpTag('makesurenonumericcolumnhasemptyvalues')">Make sure no numeric column has empty values</a></div>
<div class="toc2"> 3.1&nbsp;&nbsp;<a onclick="jumpTag('createasummaryofcoviddata')">Create a summary of covid data</a></div>
<div class="toc1"> 4&nbsp;&nbsp;<a onclick="jumpTag('normalizingdata')">Normalizing data</a></div>
      </div>
      <div class="pusher">
      <div class="ui grid">
    <div class="two wide column" onclick="toggle()" title="Click to show sidebar">
      <p class="click_me" onclick="toggle()">Click to show TOC</p>
    </div>
    <div class="thirteen wide column" id="tryit_body">

<div id="page-1" class="try-page" data-pagevisible="true">
<h1 id="dataframe">Data Frame</h1>
<h2><a href="package/data-frame.html" target="_blank">Package Deep Dive</a></h2>
<p>You can explore the package and explore the some of the core caplbilities by clicking <a href="package/data-frame.html">Package Deep Dive</a></p>
<h2 id="summary">Summary</h2>
<p><a href="/frame/docs/class/src/frame/frame.js~Frame.html" target="_blank">Frame Docs</a></p>
<p>This is a database like data manipulation library. It lets you do simple database SQL like operations on in-memory tabular data. The main component of the library is a Frame. This is a data structure that contains tabular data made up of of rows and columns. Each column has a name, and just like the columns of a database table the names must be unique. The tool has been tested with 1 million rows with good performance. The total amount of data is limited by the memory of your browser or node instance. All elements (cells/column) are stored as strings or numbers. </p>
<p>A Frame 
That conversion is done by the <em><strong>frameFromBuffer</strong></em> function.  Please note thst the frame is aware that some numbers may be stored as strings, and most of the utilities will treat numbers in string format as if they were numbers. Strictly speaking you can store any any javascript primitive is a cell, but that has not been fully tested and so buyer be aware.</p>
<p>The operations include the ability to do the following:</p>
<ul>
<li><p>Convert CSV, TSV data to a frame</p></li>
<li><p>Create a subset of the data using the filter or select method similar to the sql select, including</p>
<ul>
<li>Add new columns, optionally with new data</li>
<li>Reorder couumns</li>
<li>Rename columns</li>
<li>Systematically change data is columns</li></ul></li>
<li><p>Join a frame with another frame similar to SQL innerJoin, leftJoin and outer join</p></li>
<li><p>Sort data of several columns ascending or descending on individual columns</p></li>
<li><p>Group by operation base of a set of columns, with grouping operation on some of the other columns:</p>
<ul>
<li>gb.count <em>count the number of non-empty values is a group</em></li>
<li>gb.max - <em>maximun value of a column in a group</em></li>
<li>gb.min - <em>the minimum value of a column in a group</em> </li>
<li>gb.min - <em>the minimum value of a column in a group</em> </li>
<li>gb.mean - <em>the average value of a column in a group (ignoring empty values)</em></li>
<li>gb.stdDev - <em>the standard deviation value of a column in a group (ignoring empty values)</em></li>
<li>some others </li></ul>
<h2 id="introduction">Introduction</h2></li>
</ul>
<p>The inspiration for data frame came from two sources, SQL and the powerful python pandas utility. Frame does not attempt to provide all the functionality of pandas or that of SQL. The examples provided here will
give a taste of some of the things it can do.</p>
<h3 id="overview">Overview</h3>
<ul>
<li>Data Frames strongly support a functional style of programming</li>
<li>One a Frame is created it is never modified </li>
<li>All Frame operations create a new Frame</li>
<li>Frames use data sharing to minimize the memory footprint</li>
<li>Internally the data is stored as an array of arrays<ul>
<li><strong><em>aFrame.data</em></strong> is an array of rows</li>
<li>Each row is an array of column values</li></ul></li>
<li>aFrame.columns is an array of strings representing the columns names</li>
<li>Rarely will you have to access the data directly, <ul>
<li>You must never modify the column or data array</li>
<li>Accessing the column data using a index is very inconvinent and rarely do you have to do this<ul>
<li>For your convinence a <em>row object</em> is created for ease access  </li></ul></li></ul></li>
</ul>
<button class="ui button page_next" data-page="1">Next</button><br/><br/></div> <!---  Data Frame  @@END_PAGE@@ --> <div id="page0" class="try-page" data-pagevisible="true">
<h1 id="gettingstarted">Getting started</h1>
<p>we have to bring in the str-data-frame npm module. We have several choices, using javascript es6+ module symtax,
using webpack or similar bundler, or just as a script. For rhe purposed of this tutorial I am using the good old script method. I creates in the global namesapce <em>DataFrame</em> variable.</p>
<h2 id="dataframepackage">DataFrame package</h2>
<p>Lets do a quick look a what is defined in the package.
In this html page we use the following <em><strong>unpkg.com</strong></em> to load the str-data-frame package. The exported name from the Package is <em><strong>DataFrame</strong></em>.</p>
<pre><code class="html language-html">&lt;script src="https://unpkg.com/str-data-frame@0.2.18/dist/bundle.js"&gt;&lt;/script&gt;
</code></pre>
<ul>
<li>Get the names (keys) in the module using <code>Object.keys(DataFrame)</code> </li>
<li>map the list of names to name/value pair <em>[name, value]</em></li>
<li>map the [name, value] to [name, <em><strong>type of value</strong></em>, <strong>display string of the value</strong>] note </li>
<li>result is put into <em><strong>data</strong></em> </li>
</ul>
<p>Note: We use he two following helper function </p>
<p><strong>Display function</strong> <em>D(value)</em></p>
<pre><code class="javascript language-javascript">  function D(d) {
      if(d === undefined ) return "&lt;undef&gt;";
      if(typeof d === 'function') return "&lt;func body&gt;"; 
      if(d instanceof Date) return d.toString;
      if(typeof d === 'object') return JSON.stringify(d)
      return d.toString();
  }

function getType(d) {
  if(d === undefined) return 'undefined'
  if(Array.isArray(d)) return 'Array';
  if(isClass(d)) return "class";
  return typeof d;

}
</code></pre>
<h2 id="quickstart">Quick Start</h2>
<p>So you are in a hurry and would like to see if Frames are yor you. If you have table like data, Data Frames are for you. Think of them as fast in-memory database tables.</p>
<script>

function addDiv(id, ext) {
	let targetDivName = `#${id}_${ext}`;
    let targetDiv = document.querySelector(targetDivName);
    if(!targetDiv) {
    	targetDiv = document.createElement('div');
    	targetDiv.id = targetDivName.substr(1);
    	let sibling = document.querySelector('#'+id);
    	sibling.after(targetDiv);
    }
    else targetDiv.innerHTML = '';
    return targetDiv;
}

function plotDiv() {
    let dn = $$.executeDiv;
    return addDiv(dn+'-display','plot'); // add a div for plotting after the display div
}

</script>

<p> Added DIV creation tool</p>

<button class="ui button page_prev" data-page="0">Prev</button><button class="ui button page_next" data-page="2">Next</button><br/><br/></div> <!---  Getting started  @@END_PAGE@@ --> <div id="page1" class="try-page" data-pagevisible="true">
<h1 id="getdataworldcovidreport">Get Data - World Covid Report</h1>
<h2 id="usefetchtogetrawdata">Use fetch to get raw data</h2>
<p>We will use world covid-19 daily statistics, this is a csv file that we will split into an array of lines. We can use the fetch
function to pull data from the public repository on Github. Once the promise resolves, the data eill</p>

<a id="_tryit1">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit1">
	
	var csvData;
	
	var WORLD_DATA_SRC ='https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv';
	var p = fetch(WORLD_DATA_SRC)
  		.then(response =&gt; response.text())
  		.then(data =&gt; 
          Promise.resolve(csvData = data)
      );

// The result from the last expression is displayed automatically.
// The in-built display facility is Promise aware, and will unwrap the promise 
// before displaying the data.

p  // note p is a promise, the display will wait for the promise to resolve

			</textarea>
		</div>
		<a id="_end_tryit1">
&nbsp;</a>
		<div id="tryit1-error" class="tryit-error"></div>
		<div id="tryit1-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit1-run" data-tooltip="Execute script" class="ui  green right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit2" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_1" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_1" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="createaframefromthedata">Create a frame from the data</h2>

<a id="_tryit2">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit2">
  var {frameFromBuffer, csvLine, arrProd} = DataFrame;

// frameFromBuffer is at its core the following code
//    var lines = csvData.split('\n').map(csvLine);
//    var covidFrame = new Frame(lines.slice(1), lines[0]);

  var covidFrame = frameFromBuffer(csvData, csvLine);
  // Display the first 11 results
  covidFrame.slice(0,11);

			</textarea>
		</div>
		<a id="_end_tryit2">
&nbsp;</a>
		<div id="tryit2-error" class="tryit-error"></div>
		<div id="tryit2-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit2-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit3" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_2" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_2" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="letsplotsomedata">Lets plot some data</h2>
<p>We will plot some data from the covid Frame for USA</p>
<ol>
<li>First select data for USA</li>
<li>Use plotly.js to plot come data</li>
</ol>

<a id="_tryit3">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit3">
let usa = covidFrame.filter(ro =&gt; ro.iso_code === 'USA'); // get usa data

let x = usa.rawColumn('date');         // X -axis values

let y1 = usa.rawColumn('total_cases');  // Y - axis values
let y2 = usa.rawColumn('total_deaths');  // Y - another axis values

Plotly.newPlot(
		plotDiv(),                         // create a location to plot the data
		[
			{name: 'Total Cases - USA',  x, y: y1}, // data to plot
			{name: 'Total Deaths - USA', x, y: y2} // another data to plot
    ],     
		{   
			title: 'My first Covid plot - USA',
			yaxis: {type: 'log' }
		}
)

			
			</textarea>
		</div>
		<a id="_end_tryit3">
&nbsp;</a>
		<div id="tryit3-error" class="tryit-error"></div>
		<div id="tryit3-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit3-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit4" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_3" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_3" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="1">Prev</button><button class="ui button page_next" data-page="3">Next</button><br/><br/></div> <!---  Get Data - World Covid Report  @@END_PAGE@@ --> <div id="page2" class="try-page" data-pagevisible="true">
<h1 id="organizethecoviddata">Organize the covid data</h1>
<h3 id="selectcriticalcolumns">Select Critical Columns</h3>
<p>In this section we will show how to:</p>
<ol>
<li>Select the following columns from covidFrame:<ul>
<li><strong>iso_code</strong> - </li>
<li><strong>location</strong> -</li>
<li><strong>date</strong></li>
<li><strong>total_cases</strong></li>
<li><strong>total_deaths</strong> </li>
<li><strong>mortality</strong> _Computed column  <code>100*total_deaths/total_cases</code> percent of people who die after contracting COVID-19</li></ul></li>
</ol>

<a id="_tryit4">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit4">
var countries = covidFrame.filter(ro =&gt; ro.total_cases &gt; 0)
        .select([
           'iso_code',
           'location',
           'continent',
           'date',
           'total_cases', 
           'total_deaths',
           'total_deaths_per_million',
           'total_cases_per_million',
           'population',
           ['mortality',(v,ro) =&gt; 100.0*(ro.total_deaths/ro.total_cases)]
  ]);

// Display the result for USA
countries.filter(ro =&gt; ro.iso_code === 'USA')   
      
      
			</textarea>
		</div>
		<a id="_end_tryit4">
&nbsp;</a>
		<div id="tryit4-error" class="tryit-error"></div>
		<div id="tryit4-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit4-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit5" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_4" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_4" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="rollupdataintocontinents">Roll up data into continents</h2>
<p>Next we want to rollup the data into continents, for this we will use the group
the data by <code>continent</code> </p>

<a id="_tryit5">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit5">
countries.groupBy(['continent'])

			</textarea>
		</div>
		<a id="_end_tryit5">
&nbsp;</a>
		<div id="tryit5-error" class="tryit-error"></div>
		<div id="tryit5-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit5-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit6" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_5" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_5" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>This is not quite what we need, since this is just giving us the continent names, we also need
to keep the <code>date</code> column</p>

<a id="_tryit6">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit6">
var sample = percent =&gt; () =&gt; Math.random() &lt; (percent/100.0); // sampling filter

countries = countries.filter(ro =&gt; ro.continent); // remove where no continent data

countries.groupBy(['continent', 'date'])
  .filter( sample(2.0) ) // sample 2% of the data

      
			</textarea>
		</div>
		<a id="_end_tryit6">
&nbsp;</a>
		<div id="tryit6-error" class="tryit-error"></div>
		<div id="tryit6-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit6-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit7" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_6" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_6" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>Next we want to aggrigate the <code>total_cases</code> and <code>total_deaths</code>, so we need to sum (add up) the 
thos value for every country in a continent and also on that date. We have a operation for that
in the groupBy, </p>
<ul>
<li>gb.sum('column_name')</li>
</ul>

<a id="_tryit7">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit7">
var { gb } = DataFrame;

var continents = countries
  .filter(ro =&gt; ro.continent)
  .groupBy([    
    'continent', 
    'date', 
    gb.sum('total_cases'), 
    gb.sum('total_deaths'),  
    gb.value('total_deaths_per_million',0),
    gb.value('total_cases_per_million',0),
    gb.sum('population')
  ]).update({
    total_deaths_per_million: (v,ro) =&gt; ro.total_deaths/ro.population*1000000,
    total_cases_per_million: (v,ro) =&gt; ro.total_cases/ro.population*1000000
  });

// Display a sample
continents.filter(sample(2.0))
       
      
			</textarea>
		</div>
		<a id="_end_tryit7">
&nbsp;</a>
		<div id="tryit7-error" class="tryit-error"></div>
		<div id="tryit7-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit7-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit8" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_7" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_7" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p><br/>
You will notice countries have a 'iso_code' and a 'location' namely the country </p>
<h2 id="covidsituationineverycontinent">Covid situation in every continent</h2>
<p>This is another roll up process where the dates are not important, only the largest calues of 
<code>total_cases</code> and <code>total_deaths</code></p>

<a id="_tryit8">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit8">
  var continentSummary = continents
    .groupBy([
      'continent',  
      gb.max('total_cases'), 
      gb.max('total_deaths'),
      gb.max('total_deaths_per_million'),
      gb.max('total_cases_per_million')
    ]
);

continentSummary
      
			</textarea>
		</div>
		<a id="_end_tryit8">
&nbsp;</a>
		<div id="tryit8-error" class="tryit-error"></div>
		<div id="tryit8-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit8-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit9" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_8" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_8" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="letsgetapiechaart">Let's get a pie-chaart</h3>

<a id="_tryit9">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit9">
let cs = continentSummary;
const COL_NAME = 'total_cases';
const TITLE = COL_NAME.split('_').join(' ');

var data = [{
  values: cs.rawColumn(COL_NAME),
  labels: cs.rawColumn('continent'),
  hoverinfo: 'label+percent+name',
  hole: 0.4,
  type: 'pie'
}];

var layout = {
  title: `&lt;b&gt;${TITLE}&lt;/b&gt;`,
  height: 600,
  width: 800
};

Plotly.newPlot(plotDiv(), data, layout);

			</textarea>
		</div>
		<a id="_end_tryit9">
&nbsp;</a>
		<div id="tryit9-error" class="tryit-error"></div>
		<div id="tryit9-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit9-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit10" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_9" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_9" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="countriesandcontinent">Countries and continent</h2>
<p>The countries and continents are similar but not identical, so we cannot combine them into a single table. </p>
<ol>
<li>Continests frame do not have  <code>iso_code</code> and <code>location</code> columns. </li>
<li>We can fix that using frame.select</li>
</ol>

<a id="_tryit10">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit10">
continents = continents.select([
 ["iso_code", (v,ro) =&gt; ro.continent],
 ["location", (v,ro) =&gt; ro.continent],
 "continent",
 "date",
 "total_cases",
 "total_deaths",
 "total_deaths_per_million",
 "total_cases_per_million",
 "population",
 ["mortality", (v,ro) =&gt; 100.0*(ro.total_deaths/ro.total_cases)],
]
);

continents

			</textarea>
		</div>
		<a id="_end_tryit10">
&nbsp;</a>
		<div id="tryit10-error" class="tryit-error"></div>
		<div id="tryit10-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit10-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit11" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_10" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_10" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<ol start="2">
<li>and augment the data for mortality (%) <code>total_deaths/total_cases</code> - a computed value</li>
</ol>

<a id="_tryit11">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit11">
$$.HTML('&lt;p class="huge"&gt;CONTINENT - North America from Match 2020&lt;/p&gt;');
$$.D(continents.filter(ro =&gt; ro.continent === 'North America' &amp;&amp; ro.date &gt; '2020-03').slice(0,10));
			</textarea>
		</div>
		<a id="_end_tryit11">
&nbsp;</a>
		<div id="tryit11-error" class="tryit-error"></div>
		<div id="tryit11-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit11-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit12" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_11" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_11" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>Now that we have the <strong>countries</strong> frame and the <strong>continents</strong> frame in the same shape
we can combile the into one table using the concat method</p>

<a id="_tryit12">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit12">
var countryContinent = countries.concat(continents); // add the continents to the frame (we hade sure that the both have the same shape - columns)

//Get Data for USA
$$.HTML('&lt;p class="huge"&gt;country - USA from March 20202/b&gt;')
countryContinent.filter(ro =&gt; ro.iso_code === 'USA' &amp;&amp; ro.date &gt; '2020-03') // display data for USA   
        
      
			</textarea>
		</div>
		<a id="_end_tryit12">
&nbsp;</a>
		<div id="tryit12-error" class="tryit-error"></div>
		<div id="tryit12-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit12-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit13" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_12" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_12" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="plotusacoviddata">Plot USA Covid data</h2>
<p>Plot the data using the beautiful plotly library. So first thing we need is a plottting function based on the plotly.js library. This library has to do the following:</p>

<a id="_tryit13">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit13">
function makeLines(aFrame) {
   return function (iso) {
      let frame = aFrame.filter(ro =&gt; ro.iso_code === iso &amp;&amp; ro.total_cases &gt; 0); // get get the data for a country 
      var countryName = frame.asObj(0).location; // get the name of the country - from the first row

      const unpack = (key) =&gt; frame.rawColumn(key); // get a columns from the frame 

      let x = unpack('date'); 

      let total_cases =  {name: 'Total Cases/'+countryName,  x, y: unpack('total_cases') };
      let total_deaths = {name: 'Total Deaths/'+countryName, x, y: unpack('total_deaths') };
      let mortality =    {name: '% Mortality/'+countryName,  x, y: unpack('mortality') };

      return [total_cases, total_deaths, mortality];
   }
}
  
function doPlot(frame, isoList, aDiv) {
  const getLines = makeLines(frame);
  let lines;
  if(Array.isArray(isoList)) lines = isoList.flatMap(getLines).sort((a,b) =&gt; a.name&lt;b.name?1:-1);
  else lines = getLines(isoList);

  var layout = {
    title: ' Covid Results (with Rangeslider)',
    xaxis: {rangeslider: {}, },
    yaxis: {type: 'log'      } // this can be 'linear' or 'log'
  };

  Plotly.newPlot(aDiv, lines, layout);
}

			</textarea>
		</div>
		<a id="_end_tryit13">
&nbsp;</a>
		<div id="tryit13-error" class="tryit-error"></div>
		<div id="tryit13-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit13-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit14" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_13" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_13" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="plotcountrycoviddata">Plot Country Covid data</h2>
<ul>
<li>From the we have already created the country and continent data frame. THe frame consists of the following fields:<ul>
<li><strong>iso_code</strong> </li>
<li><strong>location</strong> </li>
<li><strong>date</strong></li>
<li><strong>total_cases</strong></li>
<li><strong>total_deaths</strong> </li>
<li><strong>mortality</strong></li></ul></li>
<li>Creating continent wide data</li>
</ul>
<p>Data Frames have a powerful aggrigation capability in <code>frame.groupBy</code>, this capability is built on an similar capability in SQL, namely <code>groupby</code>. The key idea here is to collect
into groups all rows that have the sane value in a column, or a set of columns. On each group we can the apply come aggrication operation on some of thr remaining columns. </p>

<a id="_tryit14">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit14">
// Find out the location fo the current tryit script
let dn = $$.executeDiv;

let aDiv = addDiv(dn+'-display','plot'); // add a div for plotting after the display div

doPlot(countryContinent, ['USA', 'North America'], aDiv)

// ======================= Plotting utiltty ========================

// ================================== UI TO Select a country ============================

var OPTS = ({ C: 'USA', R: 'North America'})
function selCountry(obj,type) {
  let iso = obj.value;
  OPTS[type] = iso;
  doPlot(countryContinent,[OPTS.C, OPTS.R], aDiv);
}

function options(country) {
  return country.groupBy(['iso_code', 'location']).sort(['location']).map(ro=&gt; `&lt;option value="${ro.iso_code}"&gt;${ro.location}&lt;/option&gt;`).join('\n');
}

// Selector for country
let str = `
&lt;p class="ui header huge"&gt;Select a country&lt;/p&gt;
&lt;select class="ui selection dropdown" name="countries" id="countries" onchange="selCountry(this,"C")"&gt;
  ${options(countryContinent)}
&lt;/select&gt;`;

$$.HTML(str);

// Selector for continents
let str1 = `
&lt;p class="ui header huge"&gt;Select a Continent&lt;/p&gt;
&lt;select class="ui selection dropdown" name="countries" id="countries" onchange="selCountry(this,'R')"&gt;
  ${options(countryContinent.filter(ro =&gt; ro.iso_code === ro.location))}
&lt;/select&gt;`;

$$.HTML(str1);
      
			</textarea>
		</div>
		<a id="_end_tryit14">
&nbsp;</a>
		<div id="tryit14-error" class="tryit-error"></div>
		<div id="tryit14-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit14-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit15" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_14" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_14" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="2">Prev</button><button class="ui button page_next" data-page="4">Next</button><br/><br/></div> <!---  Organize the covid data  @@END_PAGE@@ --> <div id="page3" class="try-page" data-pagevisible="true">
<h1 id="morecovidframe">More Covid Frame</h1>
<h2 id="showthesizeoftheframeandthecolumnnames">Show the size of the frame and the column names</h2>
<ul>
<li>Length of the frame  <em>(covidFrame.length)</em></li>
<li>All column Names <em>(covidFrame.columns)</em></li>
<li>List the columns that are mostly numeric <em>(covidFrame.numericColumns)</em></li>
</ul>

<a id="_tryit15">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit15">
var {arrRemove} = DataFrame;

var cf = covidFrame;
var {columns, numericColumns} = cf;
var nonNumericColumns = arrRemove(columns,numericColumns)

var summary = ({ rows: covidFrame.length, 
   "Non Numeric Columns":nonNumericColumns, 
   "Numeric Columns": covidFrame.numericColumns
});

// display
$$.json(summary)

			</textarea>
		</div>
		<a id="_end_tryit15">
&nbsp;</a>
		<div id="tryit15-error" class="tryit-error"></div>
		<div id="tryit15-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit15-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit16" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_15" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_15" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="showthedatasummaryasaframe">Show the data summary as a Frame</h3>
<p>In order to create the frame we need to do the following</p>
<ol>
<li>Function to count the number of non-empty values in a column <code>countNonEmptyCells(columnName)</code></li>
<li>Function to get the <strong>type</strong> of the column <strong>Numeric</strong> or <strong>Alpha</strong> <code>columnType(colName)</code></li>
</ol>

<a id="_tryit16">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit16">
// Helper function to count number of non-empty values  in a column in the frame _cf_
function countNonEmptyCells(colName){ 
    return cf.groupBy( [gb.count(colName,'count')] ).asObj(0).count ;
}

// Function to get the column type
function columnType(col) { 
  return (numericColumns.indexOf(col) !== -1) ? 'Numeric' : 'Alpha'; 
}

// compute the rows of the frame
let rowsOfTheFrame = 
  cf.columns.map(
      colName =&gt; [
        columnType(colName), 
        colName, 
        countNonEmptyCells(colName)
      ]
  );

// construct the data for the frame
let data =
    [  ["rows",    '',  cf.length],
       ...rowsOfTheFrame
    ];

// create a frame from the data and display
new Frame(data, ['Type',"Col_Name", "Non_empty_cells"])
     .sort(['-Non_empty_cells','Col_Name']) // sort the frame

			</textarea>
		</div>
		<a id="_end_tryit16">
&nbsp;</a>
		<div id="tryit16-error" class="tryit-error"></div>
		<div id="tryit16-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit16-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit17" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_16" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_16" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="3">Prev</button><button class="ui button page_next" data-page="5">Next</button><br/><br/></div> <!---  More Covid Frame  @@END_PAGE@@ --> <div id="page4" class="try-page" data-pagevisible="true">
<h1 id="getridofunnecessarycolumns">Get rid of unnecessary columns</h1>
<p>In sql we can do this using <em>select</em> columns <em>from</em> table, further the select operation can rename the columns, add new columns, and transform data is columns</p>
<p>We use a similar operation for a data frames using the project</p>
<pre><code class="js language-js">     frame.project([ list of columns])
</code></pre>
<ul>
<li>We can change a column name with the following code, change <em>location</em> to <strong><em>country</em></strong></li>
</ul>
<pre><code class="js language-js">   [..., "location=country",...]
</code></pre>
<p>We also can reorder the columns by chosing the order of the columns, the example below shows
how to create a new frem from a subset of the original columns and renaming a column</p>
<p><strong>Note</strong> We can also add new columns by adding a new column name</p>
<h2 id="removingdataredundency">Removing data redundency</h2>
<p>In the covid table there is a great deal of data redendency and unnecessary data  for example for each row has a <code>iso_code</code> for each country, country name, and continent. 
In database terminology we say that the data is <strong>not normalized</strong>. In this section we will show how we can normalize the data. </p>
<p>This section we will look at how to create the following:</p>
<ol>
<li>Create frames with only some of the columns</li>
<li>Create frames to remove redundent data.</li>
<li>How to combine data from two frames</li>
</ol>

<a id="_tryit17">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit17">
var SELECTED_COLUMNS = [
  ['iso_code', (iso, ro) =&gt; iso || ro.location], // note you have to use the ro.location (original name) and not ro.country
  'location=country', // rename location to country
  ['continent', (c,ro) =&gt; c || ro.location], // if no continent data use the ro.location (country) name as the continent
  'date',
  'total_cases',
  'new_cases',
  'total_deaths',
  'new_deaths',
  'new_tests',
  'total_tests',
  'positive_rate',
  'population',
  ['INDEX', (value, row) =&gt; row.__index$]  // create a new column (INDEX) use the row number as the index
];

var frame = covidFrame.select(
      SELECTED_COLUMNS
      ,ro =&gt; ro.total_cases &gt; 0 // only keep the rows for a country start from the date of the first case 
);

$$.D( "Show first 20 rows" );
frame.slice(0,20)
  
  
			</textarea>
		</div>
		<a id="_end_tryit17">
&nbsp;</a>
		<div id="tryit17-error" class="tryit-error"></div>
		<div id="tryit17-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit17-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit18" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_17" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_17" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="getdataforbrazil">Get data for Brazil</h2>
<p>Here we will use a simpler version of select that keeps all the columns as is and filters out some of the rows. This is the same as the following sql</p>
<pre><code> select * from covidFrame where country = 'Brazil' 
</code></pre>

<a id="_tryit18">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit18">
covidFrame.filter(r =&gt; r.location === 'Brazil')

			</textarea>
		</div>
		<a id="_end_tryit18">
&nbsp;</a>
		<div id="tryit18-error" class="tryit-error"></div>
		<div id="tryit18-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit18-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit19" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_18" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_18" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="4">Prev</button><button class="ui button page_next" data-page="6">Next</button><br/><br/></div> <!---  Get rid of unnecessary columns  @@END_PAGE@@ --> <div id="page5" class="try-page" data-pagevisible="true">
<h1 id="splitcovidframe">Split COVID frame</h1>
<h2 id="countryframe">Country frame</h2>
<p>Create a frame with general country information country information into another frame</p>
<p>When we look at the original <strong>covidFrame</strong> there is a lot of duplication of data. For example, each row of d</p>

<a id="_tryit19">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit19">
var GENERAL_COLUMNS = [
    'iso_code', 'location=country', 'continent', 
    'population', 'diabetes_prevalence',
    "median_age", "aged_65_older", "aged_70_older",
    "gdp_per_capita", "extreme_poverty", "cardiovasc_death_rate",
    "female_smokers", "male_smokers", "handwashing_facilities",
    "hospital_beds_per_thousand", "life_expectancy", "human_development_index"
];

var europe  = covidFrame.select(,ro =&gt; ro.continent === 'Europe').distinct();
europe

			</textarea>
		</div>
		<a id="_end_tryit19">
&nbsp;</a>
		<div id="tryit19-error" class="tryit-error"></div>
		<div id="tryit19-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit19-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit20" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_19" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_19" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="summaryofcasesbycountry">Summary of cases by country</h3>

<a id="_tryit20">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit20">
var {sum, count, max, mean} = gb; // aggrigator functions for groupBy

var summary = frame.groupBy(
  ['country','continent', 
    max('total_deaths','deaths'), // show the maximum value of 'total_deaths' and call it deaths 
    count('INDEX', 'count'),      // count the number of entries (daily info) for each country
    max('total_cases','cases'),   // show the maximum value of 'total_cases' and call it 'cases' 
    'population'
  ])
  .sort(['continent', '-cases']);  // sort continent and cases, the cases in descending order

//display
summary

			</textarea>
		</div>
		<a id="_end_tryit20">
&nbsp;</a>
		<div id="tryit20-error" class="tryit-error"></div>
		<div id="tryit20-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit20-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit21" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_20" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_20" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="letstrytoimprovethedisplayofnumbers">Lets try to improve the display of numbers</h2>

<a id="_tryit21">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit21">
function addCommas(nStr) {
    nStr += '';
    var x = nStr.split('.');
    var x1 = x[0];
    var x2 = x.length &gt; 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
}

function toStr(str) {
  const {abs,round} = Math;
  let num = (+str);
  if(abs(round(num)-num) &lt; 1e-6) num = Math.round(num);
  else if(abs(num)&gt;1000) num = round(num);
  else if(abs(num)&gt;1) num = round(num*100)/100;
  return addCommas(num.toString());
}
Frame.HTMLFormat.number = toStr;

// Display
summary

			</textarea>
		</div>
		<a id="_end_tryit21">
&nbsp;</a>
		<div id="tryit21-error" class="tryit-error"></div>
		<div id="tryit21-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit21-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit22" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_21" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_21" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="5">Prev</button><button class="ui button page_next" data-page="7">Next</button><br/><br/></div> <!---  Split COVID frame  @@END_PAGE@@ --> <div id="page6" class="try-page" data-pagevisible="true">
<h1 id="summarizetheinformationbycontinent">Summarize the information by continent</h1>
<p>This section will reformat the data by trans to create summary by continent</p>

<a id="_tryit22">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit22">
//summary.groupBy(['continent', 'country'])
var continent_summary = 
    summary.groupBy(['continent', sum('deaths'),  count('country', 'countries'), mean('deaths', 'avg_by_country'), sum('cases'), sum('population')]);

// Display it
continent_summary

			</textarea>
		</div>
		<a id="_end_tryit22">
&nbsp;</a>
		<div id="tryit22-error" class="tryit-error"></div>
		<div id="tryit22-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit22-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit23" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_22" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_22" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="transpose">Transpose</h3>
<p>Transpose will rotate the table, the column name comes from the row in the country column. Pay special attention
the 'country' column is call the transpose pivot and it is important all the values in this column are unique. If the values are not unique the result of the transpose will look very weird and may violate the requirement that all the column names rae unique.</p>

<a id="_tryit23">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit23">
transpose(continent_summary, 'country')

			</textarea>
		</div>
		<a id="_end_tryit23">
&nbsp;</a>
		<div id="tryit23-error" class="tryit-error"></div>
		<div id="tryit23-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit23-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit24" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_23" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_23" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="sample1001ofthedataandshowthefirst20">Sample 1% (0.01) of the data and show the first 20</h2>

<a id="_tryit24">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit24">
var sample = frame.filter(()=&gt; Math.random() &lt; 0.01 ) // take random 1% of data
    .slice(0,20)                          // take the first 20 
    .sort(['continent', 'country'])      // sort by continent and country
sample
			</textarea>
		</div>
		<a id="_end_tryit24">
&nbsp;</a>
		<div id="tryit24-error" class="tryit-error"></div>
		<div id="tryit24-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit24-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit25" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_24" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_24" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="createsomeutilityfunctiontoroundanumericstring">Create some utility function to round a numeric string</h2>
<ul>
<li>Since all data is stored as strings or number, empty values are represented ny the empty string</li>
<li>The round function will conver it to a numeric round the value convert back to a string</li>
</ul>

<a id="_tryit25">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit25">
// Since all data is stored as strings
// The round function will convert empty strings to '0', will round the value

function round(v) {
    var r = +v;
    if(isNaN(r)) return '0';
    return Math.round(r);
}

// Test the function
var testS = ({
  "Round a non-numeric": round('abc'),
  "Round an integer": round("124"),
  "Round a negetive integer": round("-125"),
  "Round an real": round("124.3"),
  "Round a negetive real": round("-125.6")
});

//Display testS
testS

			</textarea>
		</div>
		<a id="_end_tryit25">
&nbsp;</a>
		<div id="tryit25-error" class="tryit-error"></div>
		<div id="tryit25-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit25-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit26" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_25" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_25" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="makesurenonumericcolumnhasemptyvalues">Make sure no numeric column has empty values</h2>
<p>To do this we use the frame.update method, this method take an <strong><em>update object</em></strong> as a parameter</p>
<ul>
<li>We need to find columns that are mostly numeric '90%' or empty, <em>frame.numericColumns</em> will get
us the list of those column names</li>
</ul>

<a id="_tryit26">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit26">
var {arrProd} = DataFrame;
var p1 = arrProd(['a','b','c'], 'x'); // [ ['a', 'x'], ['b', 'x'], ['c', 'x'], ]
var p2 = arrProd('x', ['a','b','c']); // [ ['x', 'a'], ['x', 'b'], ['x', c'], ]
var p3 = arrProd(['a','b'], ['X', 'Y'])// [ ['a', 'X'],['a', 'Y'], ['b', 'X'], ['b', 'Y'], ]
JSON.stringify([p1, p2, p3])

			</textarea>
		</div>
		<a id="_end_tryit26">
&nbsp;</a>
		<div id="tryit26-error" class="tryit-error"></div>
		<div id="tryit26-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit26-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit27" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_26" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_26" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>

<a id="_tryit27">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit27">
function forceZero(v) { return round(v || '0')}

var NUMERIC_COLS = frame.numericColumns;
var col_update_list = arrProd(NUMERIC_COLS,forceZero);
var TO_ZERO = Object.fromEntries(col_update_list);

			</textarea>
		</div>
		<a id="_end_tryit27">
&nbsp;</a>
		<div id="tryit27-error" class="tryit-error"></div>
		<div id="tryit27-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit27-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit28" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_27" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_27" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>

<a id="_tryit28">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit28">
// Update the frame so that all empty value in numeric columns is set to zero 
frame = frame.update(TO_ZERO)
frame
			</textarea>
		</div>
		<a id="_end_tryit28">
&nbsp;</a>
		<div id="tryit28-error" class="tryit-error"></div>
		<div id="tryit28-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit28-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit29" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_28" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_28" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="createasummaryofcoviddata">Create a summary of covid data</h3>

<a id="_tryit29">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit29">
var round_some_columns =  { 
    total_cases: round, 
    max_new_cases_in_a_day: round,
    avg_new_cases_in_a_day: round
};

frame.groupBy(['continent','country', // columns to group on
               gb.count('date', 'rows'), // count the number of values in the date column after grouping
               gb.max('total_cases'), // get the max value in the total_cases column for the group 
               gb.max('new_cases', 'max_new_cases_in_a_day'), // get the max value in the total_cases 
                                                             // column for the group and give it the name 'max_new_cases_in_a_day 
               gb.mean('new_cases', 'avg_new_cases_in_a_day') // get the average value for new cases
              ])
    .update( {...round_some_columns, avg_new_cases_in_a_day: (v,ro) =&gt; round(ro.total_cases/ro.rows)} )
    .sort(['-rows', '-continent','-total_cases']) // rows, continent and total_cases is sorted in descending order: 
			</textarea>
		</div>
		<a id="_end_tryit29">
&nbsp;</a>
		<div id="tryit29-error" class="tryit-error"></div>
		<div id="tryit29-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit29-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit30" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_29" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_29" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="normalizingdata">Normalizing data</h2>
<p>As you will notice in the covidFrame there is a lot of redundent data, for example most of the country data is repeated
on ever row for thar country and there is some missing data for example iso_code is not present for every locaton. Since we would like to use the <code>iso_code</code> as the unique key for every country, let us find the locations with missing <code>iso_code</code></p>

<a id="_tryit30">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit30">
covidFrame.groupBy(['iso_code', 'location']).filter(ro =&gt; !.iso_code) 

			</textarea>
		</div>
		<a id="_end_tryit30">
&nbsp;</a>
		<div id="tryit30-error" class="tryit-error"></div>
		<div id="tryit30-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit30-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit31" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_30" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_30" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<div id="msgbox-area" class="msgbox-area"></div>
<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>


<button class="ui button page_prev" data-page="6">Prev</button><br/><br/></div> <!--- Summarize the information by continent  @@END_PAGE@@ -->

          <script
          src="https://code.jquery.com/jquery-3.1.1.min.js"
          integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
          crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
        <script>
          $('.activating.element').popup({inline: true, });
          $('.ui.accordion').accordion();
          $('.ui.dropdown.item').dropdown({on: 'hover'});
          function toggle() {
            $('.ui.sidebar').sidebar('toggle');
          }
        </script>
   
       </div>
     </div>
  </div>

</body></html>