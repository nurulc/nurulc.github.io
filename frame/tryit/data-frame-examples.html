<!DOCTYPE html>
<html><head>
<link rel="stylesheet" href="./stylesheets/tryit.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/styles/default.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/theme/cobalt.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/fold/foldgutter.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/lint/lint.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/dialog/dialog.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" />
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.0/build/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/edit/matchbrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/edit/closebrackets.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/comment/continuecomment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/comment/comment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/keymap/sublime.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/selection/active-line.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/2/lib/util/formatting.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/fold/foldcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/fold/foldgutter.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/fold/brace-fold.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/fold/comment-fold.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/fold/indent-fold.min.js"></script>
<script src="https://unpkg.com/jshint@2.12.0/dist/jshint.js"></script>
<script src="https://unpkg.com/csslint@1.0.5/dist/csslint.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/lint/lint.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/lint/javascript-lint.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/search/search.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/search/searchcursor.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/dialog/dialog.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/hint/show-hint.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.1/addon/hint/javascript-hint.min.js"></script>
<script src="https://unpkg.com/js-sha1/src/sha1.js"></script>
<script src="./javascript/prettyprint.js"></script>
<script src="./javascript/tryit.js"></script>
<title>Data Frame Examples</title>
<meta name="viewport" content="width=device-width, initial-scale=0.7">
<!-- Load plotly.js into the DOM -->
  <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
<script src="https://unpkg.com/str-data-frame@^0.2/dist/bundle.js"></script>
<script src="./diagramax.dev.js"></script>
<link href="./diagramax.dev.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Dosis:wght@400;600;800&display=swap" rel="stylesheet">
<!-- <link href="https://cdn.datatables.net/1.10.22/css/dataTables.semanticui.min.css"> -->

<!-- font-family: font-family: 'Dosis', sans-serif; -->
<link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,400;0,600;0,700;0,900;1,400;1,600;1,700&display=swap" rel="stylesheet">
<!-- font-family: 'Titillium Web', sans-serif; -->

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/se/dt-1.10.22/b-1.6.5/kt-2.5.3/sc-2.0.3/datatables.min.css"/>

<script>

function D(d) {
    if(d === undefined ) return "<undef>";
    //if(isClass(d)) return d.prototype.constructor.toString();
    if(typeof d === 'function') return "<func body>"; 
    if(d instanceof Date) return d.toString;
    if(typeof d === 'object') return JSON.stringify(d)
    return d.toString();
}

function getType(d) {
    if(d === undefined) return 'undefined'
    if(Array.isArray(d)) return 'Array';
    return typeof d;

}

function textArea(s) {
  return `<textarea>${asHTML(this.s.substr(0,2000))}</textarea>`;
}

function Text(s) {
  if(s === undefined || s.length < 100) return JSON.stringify(s);
  return ({
   s,
   "_toHtml" : textArea 
  });
}

function isClass(d) { return false;
  // try {
  // 	if( typeof d !== "function" ) return false; 
  // 	var x = new d;

  // 	let name = x.constructor ? x.constructor.name : '';
  // 	return (name !== '' && name !==  'Array' && name !== 'Function');
  //  } catch(e) {
  //  	  return false;
  //  }
}

function isEmpty(arrOrObj) {
  if(arrOrObj === '' || arrOrObj === undefined || arrOrObj === null) return true;
  if(Array.isArray(arrOrObj) && arrOrObj.length === 0) return true;
  if(typeof arrOrObj === 'object' && 
      Object.keys(arrOrObj).length === 0 ) return true;
  return false;
}

function timeOf(fn) {
  const name = 'func';
  const t0 = new Date().getTime();

  const res = fn();

  const t1 = new Date().getTime();
  $$.D(`Call to ${name} took ${t1 - t0} milliseconds.`);
  return res; 
}

function getTryitAttr(d) {
  //var d = document.querySelector('#_tryit21 ~ div')

  var ta = d.querySelector('textarea');
  var myId = ta.id;
  var a_after_ta = ta.closest('div ~ div').querySelector('div ~ a');
}


function customElement(element_name,process, ...args) {
  customElements.define(element_name,
  class extends HTMLElement {
    constructor() {
      super();
      process = process || (x => x)
      const template = process(
        document
        .getElementById(elemant_name+'-template')
        .content, ...args);
      const shadowRoot = this.attachShadow({mode: 'open'})
        .appendChild(template.cloneNode(true));
    }
  }
);
}

</script>

</head>
<body>
<div class="ui sidebar inverted vertical menu">
<div class="item"> <a href="https://github.com/nurulc/tryitjs" target="_blank"><img src="https://unpkg.com/tryitjs/tryit-small.png"></a></div> 
<div class="item">
<div class="ui right dropdown item">
    Options
    <i class="dropdown icon"></i>
    <div class="menu tryit_main">
      <div class="item save_all">Save All Changes</div>
      <div class="item revert_changes">Revert changes</div>
      <div class="item clear_storage">Delete All Changes</div>
    </div> 
  </div>
</div>
<div class="item toc_title">Contents</div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('dataframe')">Data Frame</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('summary')">Summary</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('introduction')">Introduction</a></div>
<div class="toc2"> 2.1&nbsp;&nbsp;<a onclick="jumpTag('overview')">Overview</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('gettingstarted')">Getting started</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('dataframepackage')">DataFrame package</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('quickstart')">Quick Start</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('getdataworldcovidreport')">Get Data - World Covid Report</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('usefetchtogetrawdata')">Use fetch to get raw data</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('splitintolines')">Split into lines</a></div>
<div class="toc1"> 3&nbsp;&nbsp;<a onclick="jumpTag('createaframefromthedata')">Create a frame from the data</a></div>
<div class="toc2"> 3.1&nbsp;&nbsp;<a onclick="jumpTag('whathappened')">What happened</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('improvingrenderingofframe')">Improving rendering of frame</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('letsplotsomedata')">Lets plot some data</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('notesonplotting')">Notes on plotting</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('organizethecoviddata')">Organize the covid data</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('selectcriticalcolumns')">Select Critical Columns</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('rollingupdata')">Rolling Up Data</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('rollupdataintocontinents')">Roll up data into continents</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('covidsituationineverycontinent')">Covid situation in every continent</a></div>
<div class="toc2"> 2.1&nbsp;&nbsp;<a onclick="jumpTag('letsgetapiechaart')">Let's get a pie-chaart</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('morerollup')">More Rollup</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('countriesandcontinent')">Countries and continent</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('plotusacoviddata')">Plot USA Covid data</a></div>
<div class="toc2"> 2.1&nbsp;&nbsp;<a onclick="jumpTag('utilsfordoinglineplots')">Utils for doing line plots</a></div>
<div class="toc1"> 3&nbsp;&nbsp;<a onclick="jumpTag('plotcountrycoviddata')">Plot Country Covid data</a></div>
<div class="toc1"> 4&nbsp;&nbsp;<a onclick="jumpTag('someuitest')">Some UI Test</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('morecovidframe')">More Covid Frame</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('showthesizeoftheframeandthecolumnnames')">Show the size of the frame and the column names</a></div>
<div class="toc2"> 1.1&nbsp;&nbsp;<a onclick="jumpTag('showthedatasummaryasaframe')">Show the data summary as a Frame</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('getridofunnecessarycolumns')">Get rid of unnecessary columns</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('removingdataredundency')">Removing data redundency</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('butfirstletsfillsomemissingdata')">But first lets fill some missing data</a></div>
<div class="toc2"> 2.1&nbsp;&nbsp;<a onclick="jumpTag('letsfixthosevalues')">Lets fix those values</a></div>
<div class="toc1"> 3&nbsp;&nbsp;<a onclick="jumpTag('selectasunsetofcolumns')">Select a sunset of columns</a></div>
<div class="toc1"> 4&nbsp;&nbsp;<a onclick="jumpTag('countryuniquevalues')">Country Unique Values</a></div>
<div class="toc1"> 5&nbsp;&nbsp;<a onclick="jumpTag('getdataforbrazil')">Get data for Brazil</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('splitcovidframe')">Split COVID frame</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('countryframe')">Country frame</a></div>
<div class="toc2"> 1.1&nbsp;&nbsp;<a onclick="jumpTag('summaryofcasesbycountry')">Summary of cases by country</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('letstrytoimprovethedisplayofnumbers')">Lets try to improve the display of numbers</a></div>
<div class="toc0"> &nbsp;&nbsp;<a onclick="jumpTag('summarizetheinformationbycontinent')">Summarize the information by continent</a></div>
<div class="toc2"> 0.1&nbsp;&nbsp;<a onclick="jumpTag('transpose')">Transpose</a></div>
<div class="toc1"> 1&nbsp;&nbsp;<a onclick="jumpTag('sample1001ofthedataandshowthefirst20')">Sample 1% (0.01) of the data and show the first 20</a></div>
<div class="toc1"> 2&nbsp;&nbsp;<a onclick="jumpTag('createsomeutilityfunctiontoroundanumericstring')">Create some utility function to round a numeric string</a></div>
<div class="toc1"> 3&nbsp;&nbsp;<a onclick="jumpTag('makesurenonumericcolumnhasemptyvalues')">Make sure no numeric column has empty values</a></div>
<div class="toc2"> 3.1&nbsp;&nbsp;<a onclick="jumpTag('createasummaryofcoviddata')">Create a summary of covid data</a></div>
<div class="toc1"> 4&nbsp;&nbsp;<a onclick="jumpTag('normalizingdata')">Normalizing data</a></div>
      </div>
      <div class="pusher">
      <div class="ui grid">
    <div class="two wide column" onclick="toggle()" title="Click to show sidebar">
      <p class="click_me" onclick="toggle()">Click to show TOC</p>
    </div>
    <div class="thirteen wide column" id="tryit_body">

<div   id="page-1" class="try-page" data-pagevisible="true">
<h1 id="dataframe">Data Frame</h1>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: "></i></p>
<h2><a href="package/page-data-frame.html" target="_blank">Package Deep Dive</a></h2>
<p>You can explore the package and explore the some of the core caplbilities by clicking 
<a href="package/page-data-frame.html">Package Deep Dive</a></p>
<style>
.icon-right {
    position: relative;
    float: right;
    top: -3rem;
}
</style>

<h2 id="summary">Summary</h2>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: summary.try < try&#95;src/data-frame-example/index.try"></i></p>
<!--<i class="icon question circle green icon-right" title="&#95;this&#95;is&#95;a&#95;Question"></i>-->
<p><a href="/frame/docs/class/src/frame/frame.js~Frame.html" target="_blank">Frame Docs</a></p>
<p>This is a database like data manipulation library. It lets you do simple database SQL like operations on in-memory tabular data. The main component of the library is a Frame. This is a data structure that contains tabular data made up of of rows and columns. Each column has a name, and just like the columns of a database table the names must be unique. The tool has been tested with 1 million rows with good performance. The total amount of data is limited by the memory of your browser or node instance. All elements (cells/column) are stored as strings or numbers. </p>
<p>A Frame 
That conversion is done by the <em><strong>frameFromBuffer</strong></em> function.  Please note thst the frame is aware that some numbers may be stored as strings, and most of the utilities will treat numbers in string format as if they were numbers. Strictly speaking you can store any any javascript primitive is a cell, but that has not been fully tested and so buyer be aware.</p>
<p>The operations include the ability to do the following:</p>
<ul>
<li>Convert CSV, TSV data to a frame</li>
<li>Create a subset of the data using the filter or select method similar to the sql select, including<ul>
<li>Add new columns, optionally with new data</li>
<li>Reorder couumns</li>
<li>Rename columns</li>
<li>Systematically change data is columns</li></ul></li>
<li>Join a frame with another frame similar to SQL innerJoin, leftJoin and outer join</li>
<li>Sort data of several columns ascending or descending on individual columns</li>
<li>Group by operation base of a set of columns, with grouping operation on some of the other columns:<ul>
<li>gb.count <em>count the number of non-empty values is a group</em></li>
<li>gb.max - <em>maximun value of a column in a group</em></li>
<li>gb.min - <em>the minimum value of a column in a group</em> </li>
<li>gb.min - <em>the minimum value of a column in a group</em> </li>
<li>gb.mean - <em>the average value of a column in a group (ignoring empty values)</em></li>
<li>gb.stdDev - <em>the standard deviation value of a column in a group (ignoring empty values)</em></li>
<li>some others </li></ul></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: introduction.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>The inspiration for data frame came from two sources, SQL and the powerful python pandas utility. Frame does not attempt to provide all the functionality of pandas or that of SQL. The examples provided here will
give a taste of some of the things it can do.</p>
<h3 id="overview">Overview</h3>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: introduction.try < try&#95;src/data-frame-example/index.try"></i></p>
<ul>
<li>Data Frames strongly support a functional style of programming</li>
<li>One a Frame is created it is never modified </li>
<li>All Frame operations create a new Frame</li>
<li>Frames use data sharing to minimize the memory footprint</li>
<li>Internally the data is stored as an array of arrays<ul>
<li><strong><em>aFrame.data</em></strong> is an array of rows</li>
<li>Each row is an array of column values</li></ul></li>
<li>aFrame.columns is an array of strings representing the columns names</li>
<li>Rarely will you have to access the data directly, <ul>
<li>You must never modify the column or data array</li>
<li>Accessing the column data using a index is very inconvinent and rarely do you have to do this<ul>
<li>For your convinence a <em>row object</em> is created for ease access  </li></ul></li></ul></li>
</ul>
<button class="ui button page_next" data-page="1">Next</button><br/><br/></div> <!---  Data Frame  @@END_PAGE@@ --> <div   id="page0" class="try-page" data-pagevisible="true">
<h1 id="gettingstarted">Getting started</h1>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: try&#95;src/getting-started.try < try&#95;src/data-frame-example/index.try"></i>
  we have to bring in the str-data-frame npm module. We have several choices, using javascript es6+ module symtax,
  using webpack or similar bundler, or just as a script. For rhe purposed of this tutorial I am using the good old script method. I creates in the global namesapce <em>DataFrame</em> variable.</p>
<h2 id="dataframepackage">DataFrame package</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/getting-started.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>Lets do a quick look a what is defined in the package.
  In this html page we use the following <em><strong>unpkg.com</strong></em> to load the str-data-frame package. The exported name from the Package is <em><strong>DataFrame</strong></em>.</p>
<pre><code class="html language-html">  &lt;script src="https://unpkg.com/str-data-frame@0.2.18/dist/bundle.js"&gt;&lt;/script&gt;
</code></pre>
<ul>
<li><p>Get the names (keys) in the module using <code>Object.keys(DataFrame)</code> </p></li>
<li><p>map the list of names to name/value pair <em>[name, value]</em></p></li>
<li><p>map the [name, value] to [name, <em><strong>type of value</strong></em>, <strong>display string of the value</strong>] note </p></li>
<li><p>result is put into <em><strong>data</strong></em> </p>
<p>Note: We use he two following helper function </p>
<p><strong>Display function</strong> <em>D(value)</em></p></li>
</ul>

<div class="ui my-styled accordion">
  		<div class="ui  title shrink">
    		<i class="dropdown icon"></i>
    		TryitJS Source
    	</div>
    	<div class="content ">
    	

<div class=" accordion">
  		<div class="ui active title shrink">
    		<i class="dropdown icon"></i>
    		!js
    	</div>
    	<div class="content active">
    	<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">D</span>(<span class="hljs-params">d</span>) </span>{
    <span class="hljs-keyword">if</span>(d === <span class="hljs-literal">undefined</span> ) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;undef&gt;&quot;</span>;
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> d === <span class="hljs-string">&#x27;function&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;func body&gt;&quot;</span>; 
    <span class="hljs-keyword">if</span>(d <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) <span class="hljs-keyword">return</span> d.toString;
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> d === <span class="hljs-string">&#x27;object&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(d)
    <span class="hljs-keyword">return</span> d.toString();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getType</span>(<span class="hljs-params">d</span>) </span>{
<span class="hljs-keyword">if</span>(d === <span class="hljs-literal">undefined</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;undefined&#x27;</span>
<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Array</span>.isArray(d)) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Array&#x27;</span>;
<span class="hljs-keyword">if</span>(isClass(d)) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;class&quot;</span>;
<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> d;

}</code></pre></div></div>
</div></div>
<h2 id="quickstart">Quick Start</h2>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: simple-example.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>So you are in a hurry and would like to see if Frames are yor you. If you have table like data, Data Frames are for you. Think of them as fast in-memory database tables.</p>
<script>
function Identity(x) { return x}
function genID(prefix) { return (prefix || 'T')+Math.round(Math.random()*100000); }
function capitalStr( phrase ) { return phrase.replace(/\b\w/g, c => c.toUpperCase());}
function addDiv(id, ext) {
    let targetDivName = `#${id}_${ext}`;
    let targetDiv = document.querySelector(targetDivName);
    if(!targetDiv) {
        targetDiv = document.createElement('div');
        targetDiv.id = targetDivName.substr(1);
        let sibling = document.querySelector('#'+id);
        sibling.after(targetDiv);
    }
    else targetDiv.innerHTML = '';
    return targetDiv;
}

function plotDiv() {
    let dn = $$.executeDiv;
    return addDiv(dn+'-display','plot'); // add a div for plotting after the display div
}

function HTML(data) {
        if(data === undefined || typeof data._toHtml === 'function') return data;
    return { _toHtml: () => data }
}

function multiSelect(opts,list) {
    let {onchange, id} = opts || {};
    id = id || genID();
    let html = `
        <div id="${id}" class="ui multiple selection dropdown">
          <input name="thick" type="hidden">
          <i class="dropdown icon"></i>
          <div class="default text">100</div>
          <div class="menu">
            ${list.map(([key,val]) => `<div class="item" data-value="${key}">${val}</div>`).join('\n')}
          </div> 
        </div>
    `;
    
        onchange = onchange || Identity
        $$.lastly(() => {
            $('#'+id).dropdown();
            if(opts.onchange){
                $('#'+id).change( function(e) { 
                 let list = $(e.currentTarget).dropdown("get values");
                 onchange(list,e);
               } );
            } 
         });
    
    return HTML(html);
}
</script>


<script>
   function UIcategoryList(source, options) {
        let {caption, onSelect,id, type, placeholder} = options|| {};
        if(caption) caption = `<p class="ui header huge">${caption}</p>`;
        else caption = '';
        type = type || 'category';
        id = id || genID($$.executeDiv);
        placeholder = placeholder || 'Search...';

        let uiDropdown = `${caption}
          <div class="ui search" id="${id}">
          <div class="ui icon input">
            <input class="prompt" type="text" placeholder="${placeholder}">
            <i class="search icon"></i>
          </div>
          <div class="results dropdown" ></div>
        </div>
        `;

        // Fill in the country dropdown list
        $$.lastly(() => {
          $('#'+id)
            .search({
              type,
              source,
              onSelect
            });
        });
        return HTML(uiDropdown);
}

</script>



<button class="ui button page_prev" data-page="0">Prev</button><button class="ui button page_next" data-page="2">Next</button><br/><br/></div> <!---  Getting started  @@END_PAGE@@ --> <div   id="page1" class="try-page" data-pagevisible="true">
<h1 id="getdataworldcovidreport">Get Data - World Covid Report</h1>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: covid-world.try < try&#95;src/data-frame-example/index.try"></i></p>
<h2 id="usefetchtogetrawdata">Use fetch to get raw data</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: covid-world.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>We will use world covid-19 daily statistics, this is a csv file that we will split into an array of lines. We can use the fetch
function to pull data from the public repository on Github. Once the promise resolves, the data eill</p>

<a id="_tryit1">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit1">
var csvData;

var WORLD_DATA_SRC ='https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv';
var p = fetch(WORLD_DATA_SRC)
    .then(response =&gt; response.text())
    .then(data =&gt; 
      Promise.resolve(csvData = data)
  );

// The result from the last expression is displayed automatically.
// The in-built display facility is Promise aware, and will unwrap the promise 
// before displaying the data.

p  // note p is a promise, the display will wait for the promise to resolve

			</textarea>
		</div>
		<a id="_end_tryit1">
&nbsp;</a>
		<div id="tryit1-error" class="tryit-error"></div>
		<div id="tryit1-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit1-run" data-tooltip="Execute script" class="ui  green right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit2" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_1" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_1" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="splitintolines">Split into lines</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: covid-world.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>Since csvData is just a big <strong><em>string</em></strong> we can use the <code>string.split</code> opertation to convert it to an array of lines, where each line is a string.</p>

<a id="_tryit2">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit2">
//
    // Split and dispaly the lines
    csvData.split('\n');
			</textarea>
		</div>
		<a id="_end_tryit2">
&nbsp;</a>
		<div id="tryit2-error" class="tryit-error"></div>
		<div id="tryit2-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit2-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit3" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_2" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_2" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="createaframefromthedata">Create a frame from the data</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: covid-world.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>Since the CSV data is just a big string, to converts it to a frame we have to do the following</p>
<ul>
<li>Split the string into an array of lines, and javascript string already supports the <strong>.split('\n')</strong> method</li>
<li>Now each line is a string, we have to split each line into an array of columns<ul>
<li>We cold use split again on ',' but CSV files allow us to escape a comma by surrounding it with ",". Since split will split on every comma we cannot use that.</li>
<li><strong>csvLine(aLine)</strong> will split a 'CSV' line into an array of column values. This is also known as a line splitter, the following line splitter exist<ul>
<li>csvLine - for CSV files</li>
<li>tsvLine - for tab seperated values</li>
<li>psvLine - '|' pipe seperated value. THis si a common format in healthcare </li></ul></li></ul></li>
<li>The columns of the first line is used as the column names, the remaining lines are the data</li>
<li>We have a convinience function to perfrom this task __Frame.frameFronString(string, )</li>
</ul>
<p>The following code is a simplified version of what <strong>.frameFromString</strong> does</p>
<pre><code>//frameFromString is at its core the following code
   var lines = csvData.split('\n').map(csvLine);
   var covidFrame = new Frame(lines.slice(1), lines[0]);
</code></pre>
<p>Create a frame from string data representing the contents of a CSV file.</p>

<a id="_tryit3">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit3">
var { csvLine, Frame } = DataFrame;
var covidFrame = Frame.frameFromString(csvData, csvLine);

// Display the first 20 results
covidFrame.slice(0,20);

			</textarea>
		</div>
		<a id="_end_tryit3">
&nbsp;</a>
		<div id="tryit3-error" class="tryit-error"></div>
		<div id="tryit3-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit3-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit4" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_3" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_3" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="whathappened">What happened</h3>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: covid-world.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>We converted a string to a frames. </p>
<ul>
<li><strong>csvData</strong> <em>The string beinng the contents of a CSV (comma seperated values) representation of a table.</em></li>
<li><strong>csvLine</strong> _function to convert one row (in string form) into an array of strings</li>
</ul>
<button class="ui button page_prev" data-page="1">Prev</button><button class="ui button page_next" data-page="3">Next</button><br/><br/></div> <!---  Get Data - World Covid Report  @@END_PAGE@@ --> <div   id="page2" class="try-page" data-pagevisible="true">
<h1 id="improvingrenderingofframe">Improving rendering of frame</h1>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: covid-world.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>A Frame has a method <strong>.&#95;toHml()</strong> to render a frame as HTML. This is a nice Table rendering module <strong>DataTable</strong>. Details for useing this 
capability can be found here: <a href="https://datatables.net/" target="_blank">DataTable</a> </p>
<p>More details about rendering a DataFrame (or any other object) to HTML: <a href="#">Docs: displaying results</a></p>
<p>We can customize the rendering as follows:</p>

<a id="_tryit4">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit4">
// mark the indentation

Frame.prototype._toHtml = function() {
  let id = 'T'+Math.round(Math.random()*100000);      // create a unique id fo the table
  // $$.lastly(funcToExecute) after all HTML rendering (from this script) has completed
  // Note $$.&lt;methods&gt; is just part of the 'TryitJS' capability and is not part of DataFrame
  // &lt;method&gt; = D, or HTML, or JSON -- this render to to display 'div' 
  $$.lastly(() =&gt; {

      const HTMLformat = this.constructor.HTMLFormat;  // rendering defaults for values in the frame
      let cellRender = (data,type) =&gt; {
        if(type !== 'display') return data;
          if(isNumber(data))  return HTMLformat.number(data,0,this);
          else return HTMLformat.other(data,0,this);

      }
      $('#'+id).DataTable( {
          data: this.data,
          columns: this.columns.map(c =&gt; 
            ({
                title: c.replace(/_/g, ' '), 
                render: cellRender
              })
            ),
          deferRender:    true
          
      });

  })
  return `&lt;table id="${id}" class="display" width="100%"&gt;&lt;/table&gt;`;
}
function isNumber(x) {
  if(x === 0) return true;
  if( !x ) return false;
  let v = +x;
  return !(isNaN(v));
}


// Display a frame using the DataTable module 
  
covidFrame.slice(0,200);    
  
			</textarea>
		</div>
		<a id="_end_tryit4">
&nbsp;</a>
		<div id="tryit4-error" class="tryit-error"></div>
		<div id="tryit4-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit4-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit5" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_4" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_4" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="2">Prev</button><button class="ui button page_next" data-page="4">Next</button><br/><br/></div> <!---  Improving rendering of frame  @@END_PAGE@@ --> <div   id="page3" class="try-page" data-pagevisible="true">
<h1 id="letsplotsomedata">Lets plot some data</h1>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: plot-covid-frame.try < covid-world.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>We will plot some data from the covid Frame for USA</p>
<ol>
<li>First select data for USA</li>
<li>Use plotly.js to plot come data</li>
</ol>

<a id="_tryit5">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit5">
let usa = covidFrame.filter(ro =&gt; ro.iso_code === 'USA'); // get usa data

let x = usa.rawColumn('date');         // X -axis values

let y1 = usa.rawColumn('total_cases');  // Y - axis values
let y2 = usa.rawColumn('total_deaths');  // Y - another axis values

Plotly.newPlot(
    plotDiv(),                         // create a location to plot the data
    [
        {name: 'Total Cases - USA',  x, y: y1}, // data to plot
        {name: 'Total Deaths - USA', x, y: y2} // another data to plot
    ],     
    {   
        title: 'My first Covid plot - USA',
        yaxis: {type: 'log' }
    }
)

			</textarea>
		</div>
		<a id="_end_tryit5">
&nbsp;</a>
		<div id="tryit5-error" class="tryit-error"></div>
		<div id="tryit5-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit5-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit6" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_5" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_5" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>.</p>
<h2 id="notesonplotting">Notes on plotting</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plot-covid-frame.try < covid-world.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>Tryitjs does not have plotting out of the box, but capability was added with the following code. <br>
Click <i class="caret right icon"></i> to show the code</p>

<div class="ui my-styled accordion">
  		<div class="ui  title shrink">
    		<i class="dropdown icon"></i>
    		Source Code for Plotting Helpers
    	</div>
    	<div class="content ">
    	

<div class=" accordion">
  		<div class="ui active title shrink">
    		<i class="dropdown icon"></i>
    		!html
    	</div>
    	<div class="content active">
    	<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Identity</span>(<span class="hljs-params">x</span>) </span>{ <span class="hljs-keyword">return</span> x}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">genID</span>(<span class="hljs-params">prefix</span>) </span>{ <span class="hljs-keyword">return</span> (prefix || <span class="hljs-string">&#x27;T&#x27;</span>)+<span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">Math</span>.random()*<span class="hljs-number">100000</span>); }
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">capitalStr</span>(<span class="hljs-params"> phrase </span>) </span>{ <span class="hljs-keyword">return</span> phrase.replace(<span class="hljs-regexp">/\b\w/g</span>, <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.toUpperCase());}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addDiv</span>(<span class="hljs-params">id, ext</span>) </span>{
    <span class="hljs-keyword">let</span> targetDivName = <span class="hljs-string">`#<span class="hljs-subst">${id}</span>_<span class="hljs-subst">${ext}</span>`</span>;
    <span class="hljs-keyword">let</span> targetDiv = <span class="hljs-built_in">document</span>.querySelector(targetDivName);
    <span class="hljs-keyword">if</span>(!targetDiv) {
        targetDiv = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;div&#x27;</span>);
        targetDiv.id = targetDivName.substr(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">let</span> sibling = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;#&#x27;</span>+id);
        sibling.after(targetDiv);
    }
    <span class="hljs-keyword">else</span> targetDiv.innerHTML = <span class="hljs-string">&#x27;&#x27;</span>;
    <span class="hljs-keyword">return</span> targetDiv;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">plotDiv</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> dn = $$.executeDiv;
    <span class="hljs-keyword">return</span> addDiv(dn+<span class="hljs-string">&#x27;-display&#x27;</span>,<span class="hljs-string">&#x27;plot&#x27;</span>); <span class="hljs-comment">// add a div for plotting after the display div</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HTML</span>(<span class="hljs-params">data</span>) </span>{
        <span class="hljs-keyword">if</span>(data === <span class="hljs-literal">undefined</span> || <span class="hljs-keyword">typeof</span> data._toHtml === <span class="hljs-string">&#x27;function&#x27;</span>) <span class="hljs-keyword">return</span> data;
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">_toHtml</span>: <span class="hljs-function">() =&gt;</span> data }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiSelect</span>(<span class="hljs-params">opts,list</span>) </span>{
    <span class="hljs-keyword">let</span> {onchange, id} = opts || {};
    id = id || genID();
    <span class="hljs-keyword">let</span> html = <span class="hljs-string">`
        &lt;div id=&quot;<span class="hljs-subst">${id}</span>&quot; class=&quot;ui multiple selection dropdown&quot;&gt;
          &lt;input name=&quot;thick&quot; type=&quot;hidden&quot;&gt;
          &lt;i class=&quot;dropdown icon&quot;&gt;&lt;/i&gt;
          &lt;div class=&quot;default text&quot;&gt;100&lt;/div&gt;
          &lt;div class=&quot;menu&quot;&gt;
            <span class="hljs-subst">${list.map(([key,val]) =&gt; <span class="hljs-string">`&lt;div class=&quot;item&quot; data-value=&quot;<span class="hljs-subst">${key}</span>&quot;&gt;<span class="hljs-subst">${val}</span>&lt;/div&gt;`</span>).join(<span class="hljs-string">&#x27;\n&#x27;</span>)}</span>
          &lt;/div&gt; 
        &lt;/div&gt;
    `</span>;
    
        onchange = onchange || Identity
        $$.lastly(<span class="hljs-function">() =&gt;</span> {
            $(<span class="hljs-string">&#x27;#&#x27;</span>+id).dropdown();
            <span class="hljs-keyword">if</span>(opts.onchange){
                $(<span class="hljs-string">&#x27;#&#x27;</span>+id).change( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ 
                 <span class="hljs-keyword">let</span> list = $(e.currentTarget).dropdown(<span class="hljs-string">&quot;get values&quot;</span>);
                 onchange(list,e);
               } );
            } 
         });
    
    <span class="hljs-keyword">return</span> HTML(html);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>


</code></pre></div></div>
</div></div>
<button class="ui button page_prev" data-page="3">Prev</button><button class="ui button page_next" data-page="5">Next</button><br/><br/></div> <!---  Lets plot some data  @@END_PAGE@@ --> <div   id="page4" class="try-page" data-pagevisible="true">
<h1 id="organizethecoviddata">Organize the covid data</h1>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>
<h2 id="selectcriticalcolumns">Select Critical Columns</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>In this section we will show how to:</p>
<ol>
<li>Select the following columns from covidFrame:<ul>
<li><strong>iso_code</strong> - </li>
<li><strong>location</strong> -</li>
<li><strong>date</strong></li>
<li><strong>total_cases</strong></li>
<li><strong>total_deaths</strong> </li>
<li><strong>mortality</strong> _Computed column  <code>100*total_deaths/total_cases</code> percent of people who die after contracting COVID-19</li></ul></li>
</ol>

<a id="_tryit6">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit6">
var countries = covidFrame.filter(ro =&gt; ro.total_cases &gt; 0)
        .select([
           'iso_code',
           'location',
           'continent',
           'date',
           'new_cases', 
           'new_deaths',
           'total_cases', 
           'total_deaths',
           'total_deaths_per_million',
           'total_cases_per_million',
           'population',
           ['mortality',(v,ro) =&gt; 100.0*(ro.total_deaths/ro.total_cases)]
  ]);

// Display the result for USA
countries.filter(ro =&gt; ro.iso_code === 'USA')   
  
  
			</textarea>
		</div>
		<a id="_end_tryit6">
&nbsp;</a>
		<div id="tryit6-error" class="tryit-error"></div>
		<div id="tryit6-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit6-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit7" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_6" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_6" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="4">Prev</button><button class="ui button page_next" data-page="6">Next</button><br/><br/></div> <!---  Organize the covid data  @@END_PAGE@@ --> <div   id="page5" class="try-page" data-pagevisible="true">
<h1 id="rollingupdata">Rolling Up Data</h1>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>This section will demonstrate the groupBy capability of DataFrame to create summary of data.</p>
<h2 id="rollupdataintocontinents">Roll up data into continents</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>Next we want to rollup the data into continents, for this we will use the group
the data by <code>continent</code> </p>

<a id="_tryit7">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit7">
countries.groupBy(['continent'])

			</textarea>
		</div>
		<a id="_end_tryit7">
&nbsp;</a>
		<div id="tryit7-error" class="tryit-error"></div>
		<div id="tryit7-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit7-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit8" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_7" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_7" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>This is not quite what we need, since this is just giving us the continent names, we also need
to keep the <code>date</code> column</p>

<a id="_tryit8">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit8">
var sample = percent =&gt; () =&gt; Math.random() &lt; (percent/100.0); // sampling filter

countries = countries.filter(ro =&gt; ro.continent); // remove where no continent data

countries.groupBy(['continent', 'date'])
  .filter( sample(2.0) ) // sample 2% of the data

  
			</textarea>
		</div>
		<a id="_end_tryit8">
&nbsp;</a>
		<div id="tryit8-error" class="tryit-error"></div>
		<div id="tryit8-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit8-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit9" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_8" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_8" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>Next we want to aggrigate the <code>total_cases</code> and <code>total_deaths</code>, so we need to sum (add up) the 
thos value for every country in a continent and also on that date. We have a operation for that
in the groupBy, </p>
<ul>
<li>gb.sum('column_name')</li>
</ul>

<a id="_tryit9">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit9">
var { gb } = DataFrame;

// Find countries that have the highest value in 'column', e.g. topN(3,countries, 'total_cases') 
//  Top 3 countries with highest cases
function topN(n,countries,column) {
  return countries.groupBy(['location', gb.sum(column)]).sort(['-'+column]).slice(0,n).map(ro =&gt; ro.location);
}

var topCountries = topN(3,countries, 'total_cases'); // get top 'total_cases' countries

var continents = countries
  .filter(ro =&gt; ro.continent) // remove locations not in a continent

   // Treat top countries (highest total_cases) as if the were a continent is themselves
   // for those countries change ther 'continent' to the country name (location)
  .update({ continent: (v,ro) =&gt; topCountries.indexOf(ro.location) !== -1?ro.location:v })
  
  .groupBy([    
    'continent', 
    'date', 
    gb.sum('total_cases'),  // sum (total_cases) on each day, for every country, in a continent
    gb.sum('total_deaths'), // ditto for total_deaths
    gb.sum('new_cases'), 
    gb.sum('new_deaths'),
    gb.value('total_deaths_per_million',0),
    gb.value('total_cases_per_million',0),
    gb.sum('population')
  ]).update({
    total_deaths_per_million: (v,ro) =&gt; ro.total_deaths/ro.population*1000000,
    total_cases_per_million: (v,ro) =&gt; ro.total_cases/ro.population*1000000
  });

// Display a sample
//$$.D(topN(7,countries, 'total_cases'));
//$$.D(countries);
continents.filter(sample(2.0))
   
  
  
  

			</textarea>
		</div>
		<a id="_end_tryit9">
&nbsp;</a>
		<div id="tryit9-error" class="tryit-error"></div>
		<div id="tryit9-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit9-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit10" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_9" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_9" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p><br/>
You will notice countries have a 'iso_code' and a 'location' namely the country </p>
<h2 id="covidsituationineverycontinent">Covid situation in every continent</h2>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: continent-pie.try < plotly.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>This is another roll up process where the dates are not important, only the largest calues of 
total<em>cases<code>and</code>total</em>deaths`</p>

<a id="_tryit10">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit10">
var continentSummary = continents
        .groupBy([
          'continent',  
          gb.max('total_cases'), 
          gb.max('total_deaths'),
          gb.max('total_deaths_per_million'),
          gb.max('total_cases_per_million')
        ]
      );

// Display
continentSummary


			</textarea>
		</div>
		<a id="_end_tryit10">
&nbsp;</a>
		<div id="tryit10-error" class="tryit-error"></div>
		<div id="tryit10-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit10-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit11" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_10" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_10" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="letsgetapiechaart">Let's get a pie-chaart</h3>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: continent-pie.try < plotly.try < try&#95;src/data-frame-example/index.try"></i></p>

<a id="_tryit11">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit11">
let cs = continentSummary;
const COL_NAME = 'total_cases';
const TITLE = COL_NAME.split('_').join(' ');

var data = [{
values: cs.rawColumn(COL_NAME),
labels: cs.rawColumn('continent'),
hoverinfo: 'label+percent+name',
textinfo: "label+value",
textposition: "outside",
hole: 0.6,
type: 'pie'
}];

var layout = {
title: `&lt;b&gt;${TITLE}&lt;/b&gt;`,
height: 600,
width: 800
};


function plotIt(data, layout) {
let dn = $$.executeDiv +'-plot';
$$.lastly(() =&gt; Plotly.newPlot(dn, data, layout));
$$.HTML(`&lt;div id="${dn}" /&gt;`);
}

plotIt(data,layout)




			</textarea>
		</div>
		<a id="_end_tryit11">
&nbsp;</a>
		<div id="tryit11-error" class="tryit-error"></div>
		<div id="tryit11-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit11-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit12" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_11" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_11" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="5">Prev</button><button class="ui button page_next" data-page="7">Next</button><br/><br/></div> <!---  Rolling Up Data  @@END_PAGE@@ --> <div   id="page6" class="try-page" data-pagevisible="true">
<h1 id="morerollup">More Rollup</h1>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>This time we will rollup data into countries and continents</p>
<ol>
<li>We have a frame for <code>continents</code></li>
<li>We will make continents frame have the same shape as the country data</li>
</ol>
<ul>
<li>We need to add 2 columns <code>iso_code</code> and <code>location</code></li>
<li>Since these columns do not exist for continents frame, we will have to compute that<ul>
<li>The simplest way is to use the same value as the <code>continent</code> column</li>
<li>We will also create a new coulmn <code>mortality</code> this value is computed by dividing <code>total_deaths</code> by <code>total_cases</code> </li></ul></li>
</ul>
<p>In the following section we will show you how to do that using the <code>select</code> method of a frame.</p>
<h2 id="countriesandcontinent">Countries and continent</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i>
The countries and continents are similar but not identical, so we cannot combine them into a single table. </p>
<ol>
<li>Continests frame do not have  <code>iso_code</code> and <code>location</code> columns. </li>
<li>We can fix that using frame.select</li>
</ol>

<a id="_tryit12">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit12">
//
    continents = continents.select([
       ["iso_code", (v,ro) =&gt; ro.continent],
       ["location", (v,ro) =&gt; ro.continent],
       "continent",
       "date",
       "new_cases",
       "new_deaths",
       "total_cases",
       "total_deaths",
       "total_deaths_per_million",
       "total_cases_per_million",
       "population",
       ["mortality", (v,ro) =&gt; 100.0*(ro.total_deaths/ro.total_cases)],
      ]
    );

    continents


			</textarea>
		</div>
		<a id="_end_tryit12">
&nbsp;</a>
		<div id="tryit12-error" class="tryit-error"></div>
		<div id="tryit12-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit12-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit13" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_12" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_12" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<ol start="2">
<li>and augment the data for mortality (%) <code>total_deaths/total_cases</code> - a computed value</li>
</ol>

<a id="_tryit13">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit13">
$$.HTML('&lt;p class="huge"&gt;CONTINENT - North America from Match 2020&lt;/p&gt;');
$$.D(continents.filter(ro =&gt; ro.continent === 'North America' &amp;&amp; ro.date &gt; '2020-03').slice(0,10));
			</textarea>
		</div>
		<a id="_end_tryit13">
&nbsp;</a>
		<div id="tryit13-error" class="tryit-error"></div>
		<div id="tryit13-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit13-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit14" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_13" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_13" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>Now that we have the <strong>countries</strong> frame and the <strong>continents</strong> frame in the same shape
we can combile the into one table using the concat method</p>

<a id="_tryit14">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit14">
var countryContinent = countries.concat(continents); // add the continents to the frame (we hade sure that the both have the same shape - columns)

//Get Data for USA
$$.HTML('&lt;p class="huge"&gt;country - USA from March 20202/b&gt;')
countryContinent.filter(ro =&gt; ro.iso_code === 'USA' &amp;&amp; ro.date &gt; '2020-03') // display data for USA   
        
  
			</textarea>
		</div>
		<a id="_end_tryit14">
&nbsp;</a>
		<div id="tryit14-error" class="tryit-error"></div>
		<div id="tryit14-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit14-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit15" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_14" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_14" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="plotusacoviddata">Plot USA Covid data</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>
<p>Plot the data using the beautiful plotly library. So first thing we need is a plottting function based on the plotly.js library. This library has to do the following:</p>
<h3 id="utilsfordoinglineplots">Utils for doing line plots</h3>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>

<a id="_tryit15">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit15">
const capitalStr = phrase =&gt; phrase.replace(/\b\w/g, c =&gt; c.toUpperCase());
function nameDesc([col,desc]) {
  return [col, desc || capitalStr(col)];
}

function makeLines(aFrame,colList) {
   return function (iso) {
      let frame = aFrame.filter(ro =&gt; ro.iso_code === iso &amp;&amp; ro.total_cases &gt; 0); // get get the data for a country 
      var countryName = frame.asObj(0).location; // get the name of the country - from the first row

      const column = (key) =&gt; frame.rawColumn(key); // get a columns from the frame 

      let x = column('date'); 
      return colList
        .map(c =&gt; nameDesc(c.split('=')))
        .map(([col,desc]) =&gt; (
        {
          name: desc+'/'+countryName,
          x,
          y: column(col)
        }
        ));
   }
}

var colList = ['new_cases', 'new_deaths', 'mortality=% Mortality' ]


function doPlot(frame, isoList, aDiv, isLinear, otherOpts) {
  const getLines = makeLines(frame,colList);
  let lines;
  if(Array.isArray(isoList)) lines = isoList.flatMap(getLines).sort((a,b) =&gt; a.name&lt;b.name?1:-1);
  else lines = getLines(isoList);

  var layout = {
    height: 800,
    title: ' Covid Results (with Rangeslider)',
//    xaxis: {rangeslider: {}, },
    yaxis: {type: isLinear?'linear':'log'      } // this can be 'linear' or 'log'
  };

  Plotly.newPlot(aDiv, lines, layout,otherOpts);
}

      


			</textarea>
		</div>
		<a id="_end_tryit15">
&nbsp;</a>
		<div id="tryit15-error" class="tryit-error"></div>
		<div id="tryit15-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit15-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit16" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_15" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_15" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="plotcountrycoviddata">Plot Country Covid data</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>
<ul>
<li>From the we have already created the country and continent data frame. THe frame consists of the following fields:<ul>
<li><strong>iso_code</strong> </li>
<li><strong>location</strong> </li>
<li><strong>date</strong></li>
<li><strong>total_cases</strong></li>
<li><strong>total_deaths</strong> </li>
<li><strong>mortality</strong></li></ul></li>
<li>Creating continent wide data</li>
</ul>
<p>Data Frames have a powerful aggrigation capability in <code>frame.groupBy</code>, this capability is built on an similar capability in SQL, namely <code>groupby</code>. The key idea here is to collect
into groups all rows that have the sane value in a column, or a set of columns. On each group we can the apply come aggrication operation on some of thr remaining columns. </p>

<a id="_tryit16">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit16">
// ================================== UI TO Select a country  and continent ============================


// ======================  Selector for country ==================

let countryDropdown = UIcategoryList(
    countryContinent.groupBy(['iso_code=ID', 'location=title', 'continent=category']).asObjList(), // list of items to select from
    { caption: 'Select Country', 
     onSelect: result =&gt; selCountry({C: result.ID})
     }
  );

// ================ Selector for continents ==================

function options(countryContinent, selected) {
  return countryContinent.groupBy(['iso_code', 'location'])
                .sort(['location'])
                .map(ro=&gt; `&lt;option value="${ro.iso_code}" ${ro.location === selected?'selected':''}&gt;${ro.location} 
                                
                           &lt;/option&gt;`)
                .join('\n');
}

let continentDropdown = `
&lt;p class="ui header huge"&gt;Select a Continent&lt;/p&gt;
&lt;select class="ui selection dropdown" 
        name="continents" id="continents" 
        onchange="selCountry({R: this.value})"&gt;
  ${options(countryContinent.filter(ro =&gt; ro.iso_code === ro.location), 'North America')}
&lt;/select&gt;`;

// ================================================================================================================ 
// Render dropdowns


$$.D(HTML(countryDropdown),HTML(continentDropdown));

// =================================================PLOTTING UTILS===================================================
// Find out the location fo the current tryit script
let dn = $$.executeDiv +'-plot';


var OPTS = ({ C: 'USA', R: 'North America'});
var isLinear = true;
function selCountry(opts) {
  console.log(opts);
  if(opts) {
    OPTS = Object.assign(OPTS, opts);
    console.log(OPTS);
  }
  doPlot(countryContinent,[OPTS.C, OPTS.R], dn,isLinear, {scrollZoom: true});
}


// ===================== Plot initial data ============================

$$.HTML(`&lt;div id="${dn}" class="plot" /&gt;`);
$$.lastly(
  () =&gt; doPlot(countryContinent, ['USA', 'North America'], dn,isLinear,{scrollZoom: true})
);
isLinear = true;
			</textarea>
		</div>
		<a id="_end_tryit16">
&nbsp;</a>
		<div id="tryit16-error" class="tryit-error"></div>
		<div id="tryit16-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit16-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit17" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_16" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_16" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="someuitest">Some UI Test</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: plotly.try < try&#95;src/data-frame-example/index.try"></i></p>

<a id="_tryit17">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit17">
    let list =[];
    function add(category, ...values) {
      let base = list.length;
      let newList = values.map((title,ix) =&gt;({id: base+ix, category, title }))
      list = [...list, ...newList];
    }
    add('alpha', 'ab','bc','ca');
    add('num', '1','2','3');
    add('punc', '!@a','@#2','#!3');

var xxx = UIcategoryList( list, 
      {placeholder: 'abc 123 !@#', 
       caption: 'My Caption', onSelect: r =&gt; console.log(r)});
$$.D(xxx, HTML('&lt;div style="height: 20rem" /&gt;'));
var EventItem = class {
  constructor(context, name, value, type, range) {
    this.context = context;
    this.name = name; 
    this._value = value; 
    this.type = type || getType(value, range); 
    this.range = range;
  }
  get value() {
  }
}
var EventContext = class {
  add(name,value,type, range) {
    let self = this;
    this[name] = { _value: value=== undefined?type.default(), type, range, set: function(v) {this.value = v; } };
    return this;
  }
}

/*

   cont __ = EventContext.types;
   let _ = new EventContext();
   _.add('isLog', true);
    .add('country', 'USA', __.CATEGOTY_LIST, countryList)
    .add('continent', 'North America', __.LIST, continentList)
    .add('columns', ['new_deaths],__.LIST, columnList)
    .on('country' (_) =&gt; {_.continent.set(_.country.value.category)})
    .trigger((_) =&gt; {
        doPlot(_.country.value.id, _.continent.value.id, _.isLog.value, _.columns.values() );
        _.continent.value.category);
    })


 */

// EventContext.types = {
//   "boolean"
  
// function checkBox(    

			</textarea>
		</div>
		<a id="_end_tryit17">
&nbsp;</a>
		<div id="tryit17-error" class="tryit-error"></div>
		<div id="tryit17-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit17-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit18" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_17" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_17" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="6">Prev</button><button class="ui button page_next" data-page="8">Next</button><br/><br/></div> <!---  More Rollup  @@END_PAGE@@ --> <div   id="page7" class="try-page" data-pagevisible="true">
<h1 id="morecovidframe">More Covid Frame</h1>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: covid-frame-description.try < try&#95;src/data-frame-example/index.try"></i></p>
<h2 id="showthesizeoftheframeandthecolumnnames">Show the size of the frame and the column names</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: covid-frame-description.try < try&#95;src/data-frame-example/index.try"></i></p>
<ul>
<li>Length of the frame  <em>(covidFrame.length)</em></li>
<li>All column Names <em>(covidFrame.columns)</em></li>
<li>List the columns that are mostly numeric <em>(covidFrame.numericColumns)</em></li>
</ul>

<a id="_tryit18">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit18">
var {arrRemove} = DataFrame;


var cf = covidFrame;
var {columns, numericColumns} = cf;
var nonNumericColumns = arrRemove(columns,numericColumns)

var summary = ({ 
   rows: covidFrame.length, 
   "Non Numeric Columns":nonNumericColumns, 
   "Numeric Columns": covidFrame.numericColumns
});

// display
$$.json(summary)


			</textarea>
		</div>
		<a id="_end_tryit18">
&nbsp;</a>
		<div id="tryit18-error" class="tryit-error"></div>
		<div id="tryit18-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit18-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit19" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_18" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_18" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="showthedatasummaryasaframe">Show the data summary as a Frame</h3>
<p><i class="icon tiny sitemap circular blue icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>In order to create the frame we need to do the following</p>
<ol>
<li>Function to count the number of non-empty values in a column <code>countNonEmptyCells(columnName)</code></li>
<li>Function to get the <strong>type</strong> of the column <strong>Numeric</strong> or <strong>Alpha</strong> <code>columnType(colName)</code></li>
</ol>

<a id="_tryit19">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit19">
var {Frame} = DataFrame;

var cf = covidFrame;
// Helper function to count number of non-empty values  in a column in the frame _cf_
function countNonEmptyCells(colName){ 
    return cf.groupBy( [gb.count(colName,'count')] ).asObj(0).count ;
}

// Function to get the column type
function columnType(col) { 
  return (numericColumns.indexOf(col) !== -1) ? 'Numeric' : 'Alpha'; 
}

// compute the rows of the frame
let rowsOfTheFrame = 
  cf.columns.map(
      colName =&gt; [
        columnType(colName), 
        colName, 
        countNonEmptyCells(colName)
      ]
  );


// construct the data for the frame
let data =
    [  ["rows",    '',  cf.length],
       ...rowsOfTheFrame
    ];

// create a frame from the data and display
new Frame(data, ['Type',"Col_Name", "Non_empty_cells"])
     .sort(['-Non_empty_cells','Col_Name']) // sort the frame


			</textarea>
		</div>
		<a id="_end_tryit19">
&nbsp;</a>
		<div id="tryit19-error" class="tryit-error"></div>
		<div id="tryit19-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit19-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit20" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_19" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_19" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="7">Prev</button><button class="ui button page_next" data-page="9">Next</button><br/><br/></div> <!---  More Covid Frame  @@END_PAGE@@ --> <div   id="page8" class="try-page" data-pagevisible="true">
<h1 id="getridofunnecessarycolumns">Get rid of unnecessary columns</h1>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>In sql we can do this using <em>select</em> columns <em>from</em> table, further the select operation can rename the columns, add new columns, and transform data is columns</p>
<p>We use a similar operation for a data frames using the project</p>
<pre><code class="js language-js">     frame.project([ list of columns])
</code></pre>
<ul>
<li>We can change a column name with the following code, change <em>location</em> to <strong><em>country</em></strong></li>
</ul>
<pre><code class="js language-js">   [..., "location=country",...]
</code></pre>
<p>We also can reorder the columns by chosing the order of the columns, the example below shows
how to create a new frem from a subset of the original columns and renaming a column</p>
<p><strong>Note</strong> We can also add new columns by adding a new column name</p>
<h2 id="removingdataredundency">Removing data redundency</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>In the covid table there is a great deal of data redendency and unnecessary data  for example for each row has a <code>iso_code</code> for each country, country name, and continent. 
In database terminology we say that the data is <strong>not normalized</strong>. In this section we will show how we can normalize the data. </p>
<p>This section we will look at how to create the following:</p>
<ol>
<li>Create frames with only some of the columns</li>
<li>Create frames to remove redundent data.</li>
<li>How to combine data from two frames</li>
</ol>
<h2 id="butfirstletsfillsomemissingdata">But first lets fill some missing data</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<ul>
<li>iso_code is the unique country code</li>
<li>Some locations are not countries so they do not have a <code>iso_code</code> or a <code>continent</code></li>
<li>for thos missing value let us set the <code>iso_code</code> and continent to the value of <code>location</code></li>
</ul>

<a id="_tryit20">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit20">
// Find out the columns with missing col values for `iso_code` or `continent`
$$.D(covidFrame.filter(ro =&gt; !ro.iso_code || !ro.continent).groupBy(['iso_code','continent', 'location']));


			</textarea>
		</div>
		<a id="_end_tryit20">
&nbsp;</a>
		<div id="tryit20-error" class="tryit-error"></div>
		<div id="tryit20-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit20-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit21" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_20" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_20" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="letsfixthosevalues">Lets fix those values</h3>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>

<a id="_tryit21">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit21">
covidFrame = covidFrame.update({
    iso_code: ((v,ro) =&gt; ro.iso_code || ro.location),
    continent: ((v,ro) =&gt; ro.continent || ro.location)
});


covidFrame.filter(ro =&gt; ro.continent === ro.location)
        .groupBy(['iso_code', 'continent', 'location'])
			</textarea>
		</div>
		<a id="_end_tryit21">
&nbsp;</a>
		<div id="tryit21-error" class="tryit-error"></div>
		<div id="tryit21-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit21-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit22" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_21" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_21" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="selectasunsetofcolumns">Select a sunset of columns</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i>
Select the most important columns using <code>Frame.select</code> method, in this prosess we can:</p>
<ol>
<li>Rename columns - <code>'location=country'</code> _rename <strong>location</strong> to <strong>country</strong></li>
<li>Create new columns - <code>['INDEX', (value, row) =&gt; row.__index$]</code> -- create and index column</li>
</ol>

<a id="_tryit22">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit22">
//

var SELECTED_COLUMNS = [
  'iso_code', 
  'location=country', // rename location to country
  'continent',
  'date',
  'total_cases',
  'new_cases',
  'total_deaths',
  'new_deaths',
  'new_tests',
  'total_tests',
  'positive_rate',
  'population',
  ['INDEX', (value, row) =&gt; row.__index$]  // create a new column (INDEX) use the row number as the index
];

var cFrame = covidFrame.select(
      SELECTED_COLUMNS
      ,ro =&gt; ro.total_cases &gt; 0 // only keep the rows for a country start from the date of the first case 
);

$$.D( "Show some sample data" );
cFrame.filter(sample(0.1))
            

			</textarea>
		</div>
		<a id="_end_tryit22">
&nbsp;</a>
		<div id="tryit22-error" class="tryit-error"></div>
		<div id="tryit22-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit22-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit23" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_22" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_22" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="countryuniquevalues">Country Unique Values</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>

<a id="_tryit23">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit23">
var cf = covidFrame;
var countryUnique = cf.groupBy([	
  "iso_code","continent", "location",	"population", "population_density", "median_age", "aged_65_older",
  "aged_70_older", "gdp_per_capita", "extreme_poverty", "cardiovasc_death_rate", "diabetes_prevalence", "female_smokers",
  "male_smokers", "handwashing_facilities", "hospital_beds_per_thousand", "life_expectancy", "human_development_index"]);
// Display Unique Values
countryUnique 
  
			</textarea>
		</div>
		<a id="_end_tryit23">
&nbsp;</a>
		<div id="tryit23-error" class="tryit-error"></div>
		<div id="tryit23-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit23-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit24" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_23" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_23" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="getdataforbrazil">Get data for Brazil</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>Here we will use a simpler version of select that keeps all the columns as is and filters out some of the rows. This is the same as the following sql</p>
<pre><code> select * from covidFrame where country = 'Brazil' 
</code></pre>

<a id="_tryit24">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit24">
covidFrame.filter(r =&gt; r.location === 'Brazil')

			</textarea>
		</div>
		<a id="_end_tryit24">
&nbsp;</a>
		<div id="tryit24-error" class="tryit-error"></div>
		<div id="tryit24-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit24-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit25" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_24" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_24" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<button class="ui button page_prev" data-page="8">Prev</button><button class="ui button page_next" data-page="10">Next</button><br/><br/></div> <!---  Get rid of unnecessary columns  @@END_PAGE@@ --> <div   id="page9" class="try-page" data-pagevisible="true">
<h1 id="splitcovidframe">Split COVID frame</h1>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<h2 id="countryframe">Country frame</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>Create a frame with general country information country information into another frame</p>
<p>When we look at the original <strong>covidFrame</strong> there is a lot of duplication of data. For example, each row of d</p>

<a id="_tryit25">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit25">
var GENERAL_COLUMNS = [
    'iso_code', 'location=country', 'continent', 
    'population', 'diabetes_prevalence',
    "median_age", "aged_65_older", "aged_70_older",
    "gdp_per_capita", "extreme_poverty", "cardiovasc_death_rate",
    "female_smokers", "male_smokers", "handwashing_facilities",
    "hospital_beds_per_thousand", "life_expectancy", "human_development_index"
];




var europe  = covidFrame
      .groupBy(GENERAL_COLUMNS)
      .filter(ro =&gt; ro.continent === 'Europe');
europe

			</textarea>
		</div>
		<a id="_end_tryit25">
&nbsp;</a>
		<div id="tryit25-error" class="tryit-error"></div>
		<div id="tryit25-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit25-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit26" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_25" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_25" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="summaryofcasesbycountry">Summary of cases by country</h3>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<ul>
<li>Use the <strong>Frame.groupBy</strong> to group all data by <strong>country</strong> and <strong>continent</strong></li>
<li>For each group (<strong>country</strong>) do the following<ul>
<li>Get maximum of <strong>total_deaths</strong> and give the column the name <strong>deaths</strong></li>
<li>Get count of number of rows (using the 'INDEX' colums) and call the column <strong>count</strong>, <strong>Note: count the number of non empty values</strong></li>
<li>Get maximum of <strong>total_cases</strong> and call the column <strong>cases</strong></li>
<li>Get maximum of <strong>population</strong> column, since this value does not change we can just use it as a part of the grouping operation</li></ul></li>
</ul>

<a id="_tryit26">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit26">
var {sum, count, max, mean} = gb; // aggrigator functions for groupBy

var summary = cFrame.groupBy(
  ['country','continent', 
    max('total_deaths','deaths'), // show the maximum value of 'total_deaths' and call it deaths 
    count('INDEX', 'count'),      // count the number of entries (daily info) for each country
    max('total_cases','cases'),   // show the maximum value of 'total_cases' and call it 'cases' 
    'population'                  // we could also `max('population')` if we ar not sure the polulation changes
  ])
  .sort(['continent', '-cases']);  // sort continent and cases, the cases in descending order

//display
summary

			</textarea>
		</div>
		<a id="_end_tryit26">
&nbsp;</a>
		<div id="tryit26-error" class="tryit-error"></div>
		<div id="tryit26-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit26-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit27" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_26" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_26" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="letstrytoimprovethedisplayofnumbers">Lets try to improve the display of numbers</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>Frame supports number formattion function.</p>
<ul>
<li>Set a global formatting function for numeric data 
<strong>Frame.HTMLFormat.number = toStr</strong> </li>
<li><strong>toStr(s: string)</strong> 
takes a string (or number) and returns a fromatted numeric string with commas add to make is easier to read</li>
<li>This does not alter the data in the frame</li>
</ul>

<a id="_tryit27">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit27">
function addCommas(nStr) {
    nStr += ''; // conver string or number to a string
    var [whole, fraction] = nStr.split('.'); // split on decimal point
    
    fraction = fraction ? '.' + fraction : ''; // add a '.' before the fractional part
    var rgx = /(\d+)(\d{3})/;  // find more then 3 digits without a comma seperator at the end of the string
    while (rgx.test(whole)) {
            whole = whole.replace(rgx, '$1' + ',' + '$2'); // add a comma seperator
    }
    return whole + fraction;
}

function toStr(str) {
  const {abs,round} = Math;
  let num = (+str);
  if(abs(round(num)-num) &lt; 1e-6) num = Math.round(num);
  else if(abs(num)&gt;1000) num = round(num);
  else if(abs(num)&gt;1) num = round(num*100)/100;
  return addCommas(num.toString());
}
Frame.HTMLFormat.number = toStr; // set the function to display numbers


// Display
$$.D(summary);
$$.D(summary.asObj(0)); // show the original data
			</textarea>
		</div>
		<a id="_end_tryit27">
&nbsp;</a>
		<div id="tryit27-error" class="tryit-error"></div>
		<div id="tryit27-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit27-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit28" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_27" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_27" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<ul>
<li><p>As you can see the numbers are nicely formatted, <strong>Note:</strong> this is for display only, the data in the frame is not changed.</p></li>
<li><p>Please feel free the edit the code and </p></li>
</ul>
<button class="ui button page_prev" data-page="9">Prev</button><button class="ui button page_next" data-page="11">Next</button><br/><br/></div> <!---  Split COVID frame  @@END_PAGE@@ --> <div   id="page10" class="try-page" data-pagevisible="true">
<h1 id="summarizetheinformationbycontinent">Summarize the information by continent</h1>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>This section will reformat the data by <strong>continent</strong> to create summary by continent</p>
<ul>
<li>Group By <strong>continent</strong></li>
</ul>

<a id="_tryit28">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit28">
//
var continent_summary = 
    summary.groupBy(['continent', sum('deaths'),  count('country', 'countries'), mean('deaths', 'avg_by_country'), sum('cases'), sum('population')]);

// Display it
continent_summary


			</textarea>
		</div>
		<a id="_end_tryit28">
&nbsp;</a>
		<div id="tryit28-error" class="tryit-error"></div>
		<div id="tryit28-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit28-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit29" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_28" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_28" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="transpose">Transpose</h3>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>Transpose will rotate the table, the column name comes from the row in the country column. Pay special attention
the 'country' column is call the transpose pivot and it is important all the values in this column are unique. If the values are not unique the result of the transpose will look very weird and may violate the requirement that all the column names rae unique.</p>

<a id="_tryit29">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit29">
var {transpose} = DataFrame;

transpose(continent_summary, 'continent')



			</textarea>
		</div>
		<a id="_end_tryit29">
&nbsp;</a>
		<div id="tryit29-error" class="tryit-error"></div>
		<div id="tryit29-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit29-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit30" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_29" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_29" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="sample1001ofthedataandshowthefirst20">Sample 1% (0.01) of the data and show the first 20</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<ul>
<li>Previously we created <strong>cFrame</strong> from <strong>covidFrame</strong> just keeping the most important data</li>
</ul>

<a id="_tryit30">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit30">
var sample = cFrame.filter(()=&gt; Math.random() &lt; 0.01 ) // take random 1% of data
    .slice(0,20)                          // take the first 20 
    .sort(['continent', 'country'])      // sort by continent and country
sample
			</textarea>
		</div>
		<a id="_end_tryit30">
&nbsp;</a>
		<div id="tryit30-error" class="tryit-error"></div>
		<div id="tryit30-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit30-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit31" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_30" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_30" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<ul>
<li>The code / display above demonstrates how to display a sample of the data</li>
</ul>
<h2 id="createsomeutilityfunctiontoroundanumericstring">Create some utility function to round a numeric string</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>This section will show you how to display large numbers in a human friendly format</p>
<ul>
<li>Since all data is stored as strings or number, empty values are represented ny the empty string</li>
<li>The <strong>Math.round</strong> function will convert it to a numeric round the value convert back to a string</li>
</ul>

<a id="_tryit31">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit31">
// Since all data is stored as strings
// The round function will convert empty strings to '0', will round the value



function round(v) {
    var r = +v;
    if(isNaN(r)) return '0';
    return Math.round(r);
}

// Test the function
var testS = ({
  "Round a non-numeric": round('abc'),
  "Round an integer": round("124"),
  "Round a negetive integer": round("-125"),
  "Round an real": round("124.3"),
  "Round a negetive real": round("-125.6")
});

//Display testS
testS

			</textarea>
		</div>
		<a id="_end_tryit31">
&nbsp;</a>
		<div id="tryit31-error" class="tryit-error"></div>
		<div id="tryit31-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit31-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit32" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_31" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_31" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="makesurenonumericcolumnhasemptyvalues">Make sure no numeric column has empty values</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>To do this we use the frame.update method, this method take an <strong><em>update object</em></strong> as a parameter</p>
<ul>
<li><p>We need to find columns that are mostly numeric '90%' or empty, <em>frame.numericColumns</em> will get
us the list of those column names</p></li>
<li><p>To apply a update function on a column we use the <strong>Frame.update</strong> method.</p></li>
<li><p>This method takes a mapping objec as a paremeter</p></li>
<li><p>The mapping object has as the key the coulmn name and value is the function to apply to the coulmn</p></li>
<li><p>The function takes two values <strong>mappingFunc1(columnValue, rowObject)</strong></p>
<ul>
<li>The result of the function is set to the column</li></ul></li>
<li><p>The mapping obj should look like  </p></li>
</ul>
<pre><code>{
  col1: forceZero,
  col2: forceZero,
  ...
}
</code></pre>
<ul>
<li>The columns are the numeric columns of the frame, and we can get that <strong>cFrame.numericColumns</strong></li>
</ul>

<a id="_tryit32">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit32">
function forceZero(v) { return round(v || '0')}

var NUMERIC_COLS = cFrame.numericColumns;
var col_update_list = NUMERIC_COLS.map(col =&gt; [col,forceZero]);
var TO_ZERO = Object.fromEntries(col_update_list);
$$.D('Numeric Columns');
$$.D(NUMERIC_COLS);

$$.D("TO_ZERO MAPPER");
TO_ZERO

      

			</textarea>
		</div>
		<a id="_end_tryit32">
&nbsp;</a>
		<div id="tryit32-error" class="tryit-error"></div>
		<div id="tryit32-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit32-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit33" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_32" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_32" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p><strong>What happened</strong></p>
<p>This create and update mapping object. Let us apply this to update the frame (as always this will create a new frame)</p>

<a id="_tryit33">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit33">
// Update the frame so that all empty value in numeric columns is set to zero 
var xFrame = cFrame.update(TO_ZERO);

//Display the frame
$$.D(xFrame)


			</textarea>
		</div>
		<a id="_end_tryit33">
&nbsp;</a>
		<div id="tryit33-error" class="tryit-error"></div>
		<div id="tryit33-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit33-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit34" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_33" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_33" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>Now I will show you a rather useful function in the <strong>DataFrame</strong> library </p>
<p><strong>Before</strong> we do this let us introduce some useful utility function in the DataFrame package <strong>arrProd</strong>. So let look at what we need to do: </p>

<a id="_tryit34">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit34">
var {arrProd} = DataFrame;
var p1 = arrProd(['a','b','c'], 'x'); // [ ['a', 'x'], ['b', 'x'], ['c', 'x'], ]
var p2 = arrProd('x', ['a','b','c']); // [ ['x', 'a'], ['x', 'b'], ['x', c'], ]
var p3 = arrProd(['a','b'], ['X', 'Y'])// [ ['a', 'X'],['a', 'Y'], ['b', 'X'], ['b', 'Y'], ]


$$.D("var p1 = arrProd(['a','b','c'], 'x')",  p1);
$$.D("p2 = arrProd('x', ['a','b','c'])",      p2);
$$.D("p3 = arrProd(['a','b'], ['X', 'Y'])",   p3);

			</textarea>
		</div>
		<a id="_end_tryit34">
&nbsp;</a>
		<div id="tryit34-error" class="tryit-error"></div>
		<div id="tryit34-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit34-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit35" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_34" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_34" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<p>So using the arrProd becomes</p>

<a id="_tryit35">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit35">
//
var TO_ZERO = Object.fromEntries(arrProd(NUMERIC_COLS, forceZero));
cFrame = cFrame.update(TO_ZERO);
//
//Display
cFrame


			</textarea>
		</div>
		<a id="_end_tryit35">
&nbsp;</a>
		<div id="tryit35-error" class="tryit-error"></div>
		<div id="tryit35-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit35-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit36" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_35" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_35" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h3 id="createasummaryofcoviddata">Create a summary of covid data</h3>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>

<a id="_tryit36">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit36">
let round_some_columns =  { 
    total_cases: round, 
    max_new_cases_in_a_day: round,
    avg_new_cases_in_a_day: round
};

cFrame.groupBy(['continent','country', // columns to group on
               gb.count('date', 'rows'), // count the number of values in the date column after grouping
               gb.max('total_cases'), // get the max value in the total_cases column for the group 
               gb.max('new_cases', 'max_new_cases_in_a_day'), // get the max value in the total_cases 
                                                             // column for the group and give it the name 'max_new_cases_in_a_day 
               gb.mean('new_cases', 'avg_new_cases_in_a_day') // get the average value for new cases
              ])
    .update( {...round_some_columns, avg_new_cases_in_a_day: (v,ro) =&gt; round(ro.total_cases/ro.rows)} )
    .sort(['-total_cases', 'continent']) // rows, continent and total_cases is sorted in descending order: 
      

			</textarea>
		</div>
		<a id="_end_tryit36">
&nbsp;</a>
		<div id="tryit36-error" class="tryit-error"></div>
		<div id="tryit36-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit36-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit37" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_36" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_36" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<h2 id="normalizingdata">Normalizing data</h2>
<p><i class="icon tiny sitemap grey icon-right" title="Include path: try&#95;src/data-frame-example/index.try"></i></p>
<p>As you will notice in the covidFrame there is a lot of redundent data, for example most of the country data is repeated
on ever row for thar country and there is some missing data for example iso_code is not present for every locaton. Since we would like to use the <code>iso_code</code> as the unique key for every country, let us find the locations with missing <code>iso_code</code></p>

<a id="_tryit37">&nbsp</a>
<div class="html ui top attached segment tryit-container " >
	<div class="ui sizer vertical segment" style="font-size: 1rem; padding-top: 2rem;">
		<div class="ui sizer vertical segment bottom">
			<textarea class="tryit ui " id="tryit37">
//
covidFrame.groupBy(['iso_code', 'location']).filter(ro =&gt; !ro.iso_code) 



			</textarea>
		</div>
		<a id="_end_tryit37">
&nbsp;</a>
		<div id="tryit37-error" class="tryit-error"></div>
		<div id="tryit37-display" class="tryit-display rendered_html"></div>
	</div>	<div class="ui top attached label">
		<button id="tryit37-run" data-tooltip="Script not ready - 
	Execute 'tryit' scripts above first" class="ui  yellow right labeled icon button exec">     <i class="caret square right icon"></i>Run</button> &nbsp; <button id="jump_tryit38" class="circular ui icon yellow button jump_next"><i class="icon angle double down"></i></button>
 &nbsp; <button class="circular ui icon button green jump_back"><i class="icon angle double up"></i></button>
 &nbsp; <button id="ra_37" data-tooltip="Execute all scripts above" class="ui right floated button circular icon green run_all"> <i class="fast backward icon"></i> </button>
 &nbsp; <button id="save_37" data-tooltip="Save all user modifications" class="ui right floated button circular icon green save_data"> <i class="save icon"></i> </button>
	</div>
</div>
<div id="msgbox-area" class="msgbox-area"></div>


<button class="ui button page_prev" data-page="10">Prev</button><br/><br/></div> <!--- Summarize the information by continent  @@END_PAGE@@ -->

  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
  <script>
    $('.activating.element').popup({inline: true, });
    $('.ui.accordion').accordion();
    $('.ui.dropdown.item').dropdown({on: 'hover'});
    function toggle() {
      $('.ui.sidebar').sidebar('toggle');
    }
  </script>
   
       </div>
     </div>
  </div>
<script type="text/javascript" src="https://cdn.datatables.net/v/se/dt-1.10.22/b-1.6.5/kt-2.5.3/sc-2.0.3/datatables.min.js"></script>
</body></html>